"use strict";(self.webpackChunkadmin_dashboard=self.webpackChunkadmin_dashboard||[]).push([[92],{7819:(e,t,n)=>{n.d(t,{e:()=>r,r:()=>o});var i=n(3527),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.moduleName="column",t}(i.qL),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.propertyName="columns",t.moduleName="columns",t}(i.qL)},7222:(e,t,n)=>{n.d(t,{L:()=>ft});var i=n(5043),a=n(8452),r=n(2771),o=n(9064),l=n(4455),s=n(3049),d="actionBegin",c="actionComplete",p="cardRendered",h="queryCellInfo",u="dataBound",g="content-ready",m="data-ready",f="dataStateChange",y=function(){function e(e){this.dataState={isPending:!1,resolver:null,isDataChanged:!1},this.parent=e,this.keyField=this.parent.cardSettings.headerField,this.dataState={isDataChanged:!1},this.isObservable=!1,this.initDataManager(e.dataSource,e.query),this.refreshDataManager()}return e.prototype.initDataManager=function(e,t){this.dataManager=e instanceof o.M?e:new o.M(e),this.query=t instanceof l.X?t:new l.X,this.kanbanData=new o.M(this.parent.kanbanData)},e.prototype.getQuery=function(){return this.query.clone()},e.prototype.getData=function(e){if(this.parent.dataSource&&"result"in this.parent.dataSource){var t=this.eventPromise({requestType:""},e);return this.isObservable=!0,t.promise}return this.dataManager.executeQuery(e)},e.prototype.setState=function(e){return this.dataState=e},e.prototype.getStateEventArgument=function(e){var t=new s.V5,n=new o.M({url:"",adaptor:new s.V5}),i=t.processQuery(n,e),r=JSON.parse(i.data);return(0,a.X$)(r,i.pvtData)},e.prototype.eventPromise=function(e,t,n){var i=this,r=e,l=this.getStateEventArgument(t),s=new o.c,d=new o.c;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(l.action=e,"cardChanged"===e.requestType||"cardRemoved"===e.requestType||"cardCreated"===e.requestType){var c=e;c.promise=d.promise,c.state=l,c.index=n,this.setState({isPending:!0,resolver:d.resolve}),r.endEdit=d.resolve,r.cancelEdit=d.reject,this.parent.trigger("dataSourceChanged",c),d.promise.then((function(){i.setState({isPending:!0,resolver:s.resolve}),i.parent.trigger(f,l),c.addedRecords.forEach((function(e){i.parent.kanbanData.push(e)})),c.changedRecords.forEach((function(e){var t=i.parent.kanbanData.filter((function(t){return t[i.parent.cardSettings.headerField]===e[i.parent.cardSettings.headerField]}))[0];(0,a.X$)(t,e)})),c.deletedRecords.forEach((function(e){var t=i.parent.kanbanData.findIndex((function(t){return t[i.parent.cardSettings.headerField]===e[i.parent.cardSettings.headerField]}));i.parent.kanbanData.splice(t,1)}))})).catch((function(){i.parent.hideSpinner()}))}else this.setState({isPending:!0,resolver:s.resolve}),this.parent.trigger(f,l);else this.setState({}),s.resolve(this.parent.dataSource);return s},e.prototype.getTable=function(){return this.parent.query?this.getQuery().fromTable:null},e.prototype.refreshDataManager=function(){var e=this;this.getData(this.getQuery()).then((function(t){return e.dataManagerSuccess(t)})).catch((function(t){return e.dataManagerFailure(t)}))},e.prototype.dataManagerSuccess=function(e,t,n,i){var r=this;if(!this.parent.isDestroyed)if(t){var o=(0,a.X$)([],e.result,null,!0);this.parent.kanbanData=o,"cardCreated"===n.requestType?Array.isArray(e)?this.modifyArrayData(n.addedRecords,e):n.addedRecords[0]=(0,a.X$)(n.addedRecords[0],e):"cardChanged"===n.requestType?Array.isArray(e)?this.modifyArrayData(n.changedRecords,e):n.changedRecords[0]=(0,a.X$)(n.changedRecords[0],e):"cardRemoved"===n.requestType&&(Array.isArray(e)?this.modifyArrayData(n.deletedRecords,e):n.deletedRecords[0]=(0,a.X$)(n.deletedRecords[0],e)),this.refreshUI(n,i)}else this.parent.trigger("dataBinding",e,(function(e){var t=(0,a.X$)([],e.result,null,!0);r.parent.kanbanData=t,r.parent.notify(m,{processedData:t}),r.parent.trigger(u,null,(function(){return r.parent.hideSpinner()}))}))},e.prototype.dataManagerFailure=function(e){var t=this;this.parent.isDestroyed||this.parent.trigger("actionFailure",{error:e},(function(){return t.parent.hideSpinner()}))},e.prototype.updateDataManager=function(e,t,n,i,a){var r,o=this;this.parent.showSpinner();var l={requestType:n,cancel:!1,addedRecords:t.addedRecords,changedRecords:t.changedRecords,deletedRecords:t.deletedRecords};this.eventPromise(l,this.query,a),this.parent.trigger(c,l,(function(n){if(!n.cancel){switch(e){case"insert":r=o.dataManager.insert(i,o.getTable(),o.getQuery());break;case"update":r=o.dataManager.update(o.keyField,i,o.getTable(),o.getQuery());break;case"delete":r=o.dataManager.remove(o.keyField,i,o.getTable(),o.getQuery());break;case"batch":r=o.dataManager.saveChanges(t,o.keyField,o.getTable(),o.getQuery())}o.dataManager.dataSource.offline?o.isObservable||(o.kanbanData=o.dataManager,o.parent.kanbanData=o.dataManager.dataSource.json,o.refreshUI(n,a)):r.then((function(){o.parent.isDestroyed||o.getData(o.getQuery()).then((function(e){return o.dataManagerSuccess(e,"DataSourceChange",n,a)})).catch((function(e){return o.dataManagerFailure(e)}))})).catch((function(e){o.dataManagerFailure(e)}))}}))},e.prototype.modifyArrayData=function(e,t){if(e.length===t.length)for(var n=0;n<t.length;n++)e[n]=(0,a.X$)(e[n],t[n]);return e},e.prototype.refreshUI=function(e,t){var n=this;this.parent.layoutModule.columnData=this.parent.layoutModule.getColumnCards(),this.parent.swimlaneSettings.keyField&&(this.parent.layoutModule.kanbanRows=this.parent.layoutModule.getRows(),this.parent.layoutModule.swimlaneData=this.parent.layoutModule.getSwimlaneCards()),e.addedRecords.forEach((function(e,i){n.parent.swimlaneSettings.keyField&&!e[n.parent.swimlaneSettings.keyField]&&(e[n.parent.swimlaneSettings.keyField]=""),n.parent.layoutModule.renderCardBasedOnIndex(e,t+i)})),e.changedRecords.forEach((function(e){n.parent.swimlaneSettings.keyField&&!e[n.parent.swimlaneSettings.keyField]&&(e[n.parent.swimlaneSettings.keyField]=""),n.parent.layoutModule.removeCard(e),n.parent.layoutModule.renderCardBasedOnIndex(e,t),n.parent.layoutModule.isSelectedCard&&n.parent.actionModule.SingleCardSelection(e),n.parent.sortSettings.field&&"Index"===n.parent.sortSettings.sortBy&&"Descending"===n.parent.sortSettings.direction&&t>0&&--t})),e.deletedRecords.forEach((function(e){n.parent.layoutModule.removeCard(e)})),this.parent.layoutModule.refresh(),this.parent.renderTemplates(),this.parent.notify(g,{}),this.parent.trigger(u,e,(function(){return n.parent.hideSpinner()}))},e}(),v=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),b=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),b([(0,a.mA)()],t.prototype,"keyField",void 0),b([(0,a.mA)()],t.prototype,"textField",void 0),b([(0,a.mA)(!1)],t.prototype,"showEmptyRow",void 0),b([(0,a.mA)(!0)],t.prototype,"showItemCount",void 0),b([(0,a.mA)(!1)],t.prototype,"allowDragAndDrop",void 0),b([(0,a.mA)()],t.prototype,"template",void 0),b([(0,a.mA)("Ascending")],t.prototype,"sortDirection",void 0),b([(0,a.mA)()],t.prototype,"sortComparer",void 0),b([(0,a.mA)(!0)],t.prototype,"showUnassignedRow",void 0),b([(0,a.mA)(!1)],t.prototype,"enableFrozenRows",void 0),t}(a.I1),C=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),w=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),w([(0,a.mA)(!0)],t.prototype,"showHeader",void 0),w([(0,a.mA)()],t.prototype,"headerField",void 0),w([(0,a.mA)()],t.prototype,"contentField",void 0),w([(0,a.mA)()],t.prototype,"tagsField",void 0),w([(0,a.mA)()],t.prototype,"grabberField",void 0),w([(0,a.mA)()],t.prototype,"footerCssField",void 0),w([(0,a.mA)()],t.prototype,"template",void 0),w([(0,a.mA)("Single")],t.prototype,"selectionType",void 0),t}(a.I1),O=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),A=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),A([(0,a.mA)()],t.prototype,"template",void 0),A([(0,a.mA)([])],t.prototype,"fields",void 0),A([(0,a.mA)(null)],t.prototype,"model",void 0),t}(a.I1),D=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),j=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),j([(0,a.mA)()],t.prototype,"keyField",void 0),j([(0,a.mA)()],t.prototype,"headerText",void 0),j([(0,a.mA)()],t.prototype,"template",void 0),j([(0,a.mA)(!1)],t.prototype,"allowToggle",void 0),j([(0,a.mA)(!0)],t.prototype,"isExpanded",void 0),j([(0,a.mA)()],t.prototype,"minCount",void 0),j([(0,a.mA)()],t.prototype,"maxCount",void 0),j([(0,a.mA)(!0)],t.prototype,"showItemCount",void 0),j([(0,a.mA)(!1)],t.prototype,"showAddButton",void 0),j([(0,a.mA)(!0)],t.prototype,"allowDrag",void 0),j([(0,a.mA)(!0)],t.prototype,"allowDrop",void 0),j([(0,a.mA)([])],t.prototype,"transitionColumns",void 0),t}(a.I1),F=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),T=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),T([(0,a.mA)()],t.prototype,"text",void 0),T([(0,a.mA)()],t.prototype,"keyFields",void 0),t}(a.I1),R=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),q=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return R(t,e),q([(0,a.mA)("Index")],t.prototype,"sortBy",void 0),q([(0,a.mA)()],t.prototype,"field",void 0),q([(0,a.mA)("Ascending")],t.prototype,"direction",void 0),t}(a.I1),P="e-kanban",I="e-rtl",N="e-device",H="e-icons",_="e-template",B="e-swimlane",V="e-kanban-table",z="e-kanban-header",K="e-header-cells",Q="e-header-wrap",X="e-header-text",J="e-header-icon",W="e-stacked-header-cell",U="e-content-cells",Y="e-kanban-content",$="e-content-table",G="e-toggle-header",Z="e-header-row",ee="e-content-row",te="e-swimlane-row",ne="e-swimlane-row-expand",ie="e-swimlane-row-collapse",ae="e-item-count",re="e-card-wrapper",oe="e-card",le="e-droppable",se="e-drag",de="e-drop",ce="e-disabled",pe="e-empty-card",he="e-column-expand",ue="e-column-collapse",ge="e-collapse-header-text",me="e-collapsed",fe="e-kanban-dialog",ye="e-kanban-form",ve="e-kanban-error",be="e-field",Se="e-target-dragged-clone",Ce="e-cloned-card",we="e-kanban-dragged-card",ke="e-target-dropped-clone",Oe="e-dropping",Ae="e-toggle-visible",Ee="e-multi-card-wrapper",De="e-target-multi-clone",je="e-column-key",xe="e-selection",Fe="e-tooltip-text",Te="e-swimlane-header",Me="e-icon-menu",Re="e-toolbar-swimlane-name",qe="e-swimlane-overlay",Le="e-swimlane-content",Pe="e-swimlane-resource",Ie="e-limits",Ne="e-max-color",He="e-min-color",_e="e-close",Be="e-popup-content",Ve="e-show-add-button",ze="e-show-add-focus",Ke="e-frozen-swimlane-row",Qe="e-frozen-row",Xe=function(){function e(e){this.parent=e,this.columnToggleArray=[],this.selectionArray=[],this.lastCardSelection=null,this.lastSelectionRow=null,this.lastCard=null,this.selectedCardsElement=[],this.selectedCardsData=[],this.hideColumnKeys=[]}return e.prototype.clickHandler=function(e){var t="."+oe+",."+J+",."+ee+"."+te+",."+Ve+",."+Ke+",."+ee+":not(."+te+") ."+U,n=(0,a.kp)(e.target,t);if(n)if(n.classList.contains(oe))this.parent.allowKeyboard&&this.parent.keyboardModule.cardTabIndexRemove(),this.cardClick(e);else if(n.classList.contains(J))this.columnExpandCollapse(e);else if(n.classList.contains(ee)&&n.classList.contains(te))this.rowExpandCollapse(e);else if(n.classList.contains(Ve))this.addButtonClick(n);else if(n.classList.contains(Ke)){var i=[].slice.call(this.parent.element.querySelectorAll("."+te)),r=this.parent.layoutModule.frozenSwimlaneRow.querySelector("."+H);this.rowExpandCollapse(e,i[this.parent.layoutModule.frozenOrder]),!!r.classList.contains(ie)?(0,a.pP)(r,[ne],[ie]):(0,a.pP)(r,[ie],[ne])}},e.prototype.addButtonClick=function(e){var t=this,n={};if(0===this.parent.kanbanData.length)n[this.parent.cardSettings.headerField]=1;else if("number"===typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField]){var i=this.parent.kanbanData.map((function(e){return parseInt(e[t.parent.cardSettings.headerField],10)}));n[this.parent.cardSettings.headerField]=Math.max.apply(Math,i)+1}if(n[this.parent.keyField]=(0,a.kp)(e,"."+U).getAttribute("data-key"),"Index"===this.parent.sortSettings.sortBy&&(n[this.parent.sortSettings.field]=1,(0,a.kp)(e,"."+U).querySelector("."+oe))){var r="Ascending"===this.parent.sortSettings.direction?e.nextElementSibling.lastElementChild:e.nextElementSibling.firstElementChild,o=this.parent.getCardDetails(r);n[this.parent.sortSettings.field]=o[this.parent.sortSettings.field]+1}0!==this.parent.kanbanData.length&&this.parent.swimlaneSettings.keyField&&(0,a.kp)(e,"."+ee).previousElementSibling&&(n[this.parent.swimlaneSettings.keyField]=(0,a.kp)(e,"."+ee).previousElementSibling.getAttribute("data-key")),this.parent.openDialog("Add",n)},e.prototype.doubleClickHandler=function(e){(0,a.kp)(e.target,"."+oe)&&this.cardDoubleClick(e)},e.prototype.cardClick=function(e,t){var n=this,i=(0,a.kp)(t||e.target,"."+oe),r=this.parent.getCardDetails(i);if(r){this.parent.activeCardData={data:r,element:i};var o={data:r,element:i,cancel:!1,event:e};this.parent.trigger("cardClick",o,(function(t){if(!t.cancel){if(i.classList.contains(xe)&&"click"===e.type)(0,a.vy)([i],xe),n.parent.layoutModule.disableAttributeSelection(i);else{var r=e.ctrlKey;n.parent.isAdaptive&&n.parent.touchModule&&(r=n.parent.touchModule.mobilePopup&&n.parent.touchModule.tabHold||r),n.cardSelection(i,r,e.shiftKey)}n.parent.isAdaptive&&n.parent.touchModule&&n.parent.touchModule.updatePopupContent();var o=(0,a.kp)(i,"."+U);if(n.parent.allowKeyboard)[].slice.call(o.querySelectorAll("."+oe)).forEach((function(e){e.setAttribute("tabindex","0")})),n.parent.keyboardModule.addRemoveTabIndex("Remove")}}))}},e.prototype.cardDoubleClick=function(e){var t=this,n=(0,a.kp)(e.target,"."+oe),i=this.parent.getCardDetails(n);this.parent.activeCardData={data:i,element:n},this.cardSelection(n,!1,!1);var r={data:i,element:n,cancel:!1,event:e};this.parent.trigger("cardDoubleClick",r,(function(e){e.cancel||t.parent.dialogModule.openDialog("Edit",r.data)}))},e.prototype.rowExpandCollapse=function(e,t){var n=this,i=e instanceof HTMLElement?e:e.target,r=(0,a.hX)(t)?i:t,o={cancel:!1,target:i,requestType:"rowExpandCollapse"};this.parent.trigger(d,o,(function(e){if(!e.cancel){var t,o=(0,a.kp)(r,"."+te),l=o.getAttribute("data-key"),s=n.parent.element.querySelector("."+ee+":nth-child("+(o.rowIndex+2)+")"),d=o.querySelector("."+ne+",."+ie),p=!!o.classList.contains(me);p?((0,a.vy)([s,o],me),(0,a.pP)(d,[ne],[ie]),n.parent.swimlaneToggleArray.splice(n.parent.swimlaneToggleArray.indexOf(l),1),t="0"):((0,a.iQ)([s,o],me),(0,a.pP)(d,[ie],[ne]),n.parent.swimlaneToggleArray.push(l),t="-1"),d.setAttribute("aria-label",p?l+" Expand":l+" Collapse"),o.setAttribute("aria-expanded",p.toString()),s.setAttribute("aria-expanded",p.toString()),[].slice.call(s.querySelectorAll("."+U)).forEach((function(e){e.setAttribute("tabindex",t)})),n.parent.notify(g,{}),n.parent.trigger(c,{target:i,requestType:"rowExpandCollapse"})}}))},e.prototype.columnExpandCollapse=function(e){var t=this,n=e instanceof HTMLElement?e:e.target,i={cancel:!1,target:n,requestType:"columnExpandCollapse"};this.parent.trigger(d,i,(function(e){if(!e.cancel){var i=(0,a.kp)(n,"."+K),r=i.cellIndex;t.columnToggle(i);var o=t.parent.element.querySelectorAll("."+K+"."+me).length;if(o===t.parent.columns.length-t.hideColumnKeys.length){var l="."+K+":not(."+W+"):nth-child("+(r+1===o?1:r+2)+")",s=t.parent.element.querySelector(l);(0,a.iQ)([s],me),t.columnToggle(s)}t.parent.notify(g,{}),t.parent.trigger(c,{target:n,requestType:"columnExpandCollapse"})}}))},e.prototype.columnToggle=function(e){var t=this,n=e.cellIndex,i="."+ee+":not(."+te+")",r=[].slice.call(this.parent.element.querySelectorAll(i)),o="."+V+" col:nth-child("+(n+1)+")",l=e.querySelector("."+he+",."+ue),s=[].slice.call(this.parent.element.querySelectorAll(o));if(e.classList.contains(me)){(0,a.vy)(s,me),this.parent.isAdaptive&&s.forEach((function(e){return e.style.width=(0,a.IV)(t.parent.layoutModule.getWidth())})),(0,a.pP)(l,[he],[ue]);for(var d=function(t){var i=t.querySelector("."+U+":nth-child("+(n+1)+")");(0,a.vy)([i,e],me),(0,a.TF)(i.querySelector("."+ge)),e.setAttribute("aria-expanded","true"),i.setAttribute("aria-expanded","true"),[].slice.call(i.parentElement.querySelectorAll("."+me)).forEach((function(e){var t=e.querySelector("."+ge);t.style.height="auto",t&&i.getBoundingClientRect().height<t.getBoundingClientRect().height+10&&(t.style.height=i.getBoundingClientRect().height-4+"px")}))},c=0,p=r;c<p.length;c++){d(p[c])}this.columnToggleArray.splice(this.columnToggleArray.indexOf(e.getAttribute("data-key")),1),this.parent.columns[n].setProperties({isExpanded:!0},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",e.getAttribute("data-key")+" Expand")}else{(0,a.iQ)(s,me),this.parent.isAdaptive&&s.forEach((function(e){return e.style.width=(0,a.IV)(50)})),(0,a.pP)(l,[ue],[he]);for(var h=e.getAttribute("data-key"),u=function(t){var n=t.querySelector("."+U+'[data-key="'+h+'"]'),i=n.cellIndex,r=(g.parent.columns[i].showItemCount?"["+n.querySelectorAll("."+oe).length+"] ":"")+g.parent.columns[i].headerText;n.appendChild((0,a.n)("div",{className:ge,innerHTML:r})),(0,a.iQ)([n,e],me),e.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),[].slice.call(n.parentElement.querySelectorAll("."+me)).forEach((function(e){var t=e.querySelector("."+ge);t&&n.getBoundingClientRect().height<t.getBoundingClientRect().height+10&&(t.style.height=n.getBoundingClientRect().height-4+"px")}))},g=this,m=0,f=r;m<f.length;m++){u(f[m])}this.columnToggleArray.push(e.getAttribute("data-key")),this.parent.columns[n].setProperties({isExpanded:!1},!0),e.querySelector(".e-header-icon").setAttribute("aria-label",h+" Collapse")}},e.prototype.cardSelection=function(e,t,n){var i=this;if(e){var r=this.parent.getSelectedCards();if("None"!==this.parent.cardSettings.selectionType){var o=(0,a.kp)(e,"."+ee);if(((0,a.hX)(this.lastSelectionRow)?o.rowIndex:this.lastSelectionRow.rowIndex)!==o.rowIndex&&(t||n)&&"Multiple"===this.parent.cardSettings.selectionType)return;if(0===r.length||t&&"Single"!==this.parent.cardSettings.selectionType||((0,a.vy)(r,xe),this.parent.layoutModule.disableAttributeSelection(r),r.forEach((function(e){i.selectionArray.splice(i.selectionArray.indexOf(e.getAttribute("data-id")),1),i.selectedCardsElement.splice(i.selectedCardsElement.indexOf(e),1),i.selectedCardsData.splice(i.selectedCardsData.indexOf(i.parent.getCardDetails(e),1))}))),r.length>0&&n&&"Multiple"===this.parent.cardSettings.selectionType){var l=[],s=void 0,d=void 0,c=void 0,p=[].slice.call(o.querySelectorAll("."+oe));p.forEach((function(e){return l.push(e.getAttribute("data-id"))}));var h=e.getAttribute("data-id"),u=this.lastCard.getAttribute("data-id"),g=d=l.indexOf(h),m=s=l.indexOf(u),f=g>m?"next":"prev";for("prev"===f&&(s=g,d=m),c=s;c<=d;c++){var y=p[c];(0,a.iQ)([y],xe),y.setAttribute("aria-selected","true"),y.setAttribute("tabindex","0"),this.selectionArray.push(y.getAttribute("data-id")),this.selectedCardsElement.push(y),this.selectedCardsData.push(this.parent.getCardDetails(y)),this.lastCardSelection=y,"prev"===f&&(this.lastCardSelection=p[s])}}else if((0,a.iQ)([e],xe),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),this.selectionArray.push(e.getAttribute("data-id")),this.selectedCardsElement.push(e),this.selectedCardsData.push(this.parent.getCardDetails(e)),this.lastCard=this.lastCardSelection=e,this.lastSelectionRow=(0,a.kp)(e,"."+ee),this.lastSelectionRow.previousElementSibling){var v="."+ne+",."+ie,b=this.lastSelectionRow.previousElementSibling.querySelector(v);b&&b.classList.contains(ie)&&this.rowExpandCollapse(b)}}}},e.prototype.addColumn=function(e,t){var n=(0,a.Q_)(x,[this.parent,"columns",e,!0]);this.parent.columns.splice(t,0,n),this.parent.notify(m,{processedData:this.parent.kanbanData})},e.prototype.deleteColumn=function(e){var t=this.parent.element.querySelectorAll("."+K).item(e);t&&t.classList.contains(G)&&this.columnToggleArray.splice(this.columnToggleArray.indexOf(t.getAttribute("data-key"),0)),this.parent.columns.splice(e,1),0===this.parent.columns.length?((0,a.Yo)(this.parent.element.querySelector("."+z)),(0,a.Yo)(this.parent.element.querySelector("."+Y))):this.parent.notify(m,{processedData:this.parent.kanbanData})},e.prototype.showColumn=function(e){var t=this.hideColumnKeys.indexOf(e.toString());-1!==t&&(this.hideColumnKeys.splice(t,1),this.parent.notify(m,{processedData:this.parent.kanbanData}))},e.prototype.hideColumn=function(e){this.hideColumnKeys.push(e.toString()),this.parent.notify(m,{processedData:this.parent.kanbanData})},e.prototype.SingleCardSelection=function(e){if("None"!==this.parent.cardSettings.selectionType&&e[this.parent.cardSettings.headerField]){var t=this.parent.element.querySelector('.e-card[data-id="'+e[this.parent.cardSettings.headerField].toString()+'"]');t&&((0,a.iQ)([t],xe),t.setAttribute("aria-selected","true"),t.setAttribute("tabindex","0"))}},e}(),Je=function(){function e(e){this.parent=e}return e.prototype.addCard=function(e,t){var n=this,i={cancel:!1,requestType:"cardCreate",addedRecords:e instanceof Array?e:[e],changedRecords:[],deletedRecords:[]};this.parent.trigger(d,i,(function(i){if(!i.cancel){var a=[];n.parent.sortSettings.field&&"Index"===n.parent.sortSettings.sortBy&&(e instanceof Array?a=e:a.push(e),a.forEach((function(e,t){if(!e[n.parent.sortSettings.field]){var i=n.parent.getColumnData(e[n.parent.keyField]);"Ascending"===n.parent.sortSettings.direction&&i.length>0?e[n.parent.sortSettings.field]=i[i.length-1][n.parent.sortSettings.field]+t+1:"Descending"===n.parent.sortSettings.direction&&i.length>0&&(e[n.parent.sortSettings.field]=i[0][n.parent.sortSettings.field]+t+1),0===i.length&&(e[n.parent.sortSettings.field]=1)}})),e instanceof Array||t||"Descending"!==n.parent.sortSettings.direction||n.parent.getColumnData(a[0][n.parent.keyField]).filter((function(e,i){e[n.parent.sortSettings.field]===a[0][n.parent.sortSettings.field]&&(t=i+1)})),0===t||t||"Descending"!==n.parent.sortSettings.direction||(t=0),a=n.priorityOrder(a,t));var r={addedRecords:e instanceof Array?e:[e],changedRecords:n.parent.sortSettings.field&&"Index"===n.parent.sortSettings.sortBy?a:[],deletedRecords:[]},o=e instanceof Array||a.length>0?"batch":"insert";n.parent.dataModule.updateDataManager(o,r,"cardCreated",e,t)}}))},e.prototype.getIndexFromData=function(e){var t=this.parent.element.querySelector("."+oe+'[data-id="'+e[this.parent.cardSettings.headerField]+'"]'),n=(0,a.kp)(t,"."+U);return[].slice.call(n.querySelectorAll("."+oe)).indexOf(t)},e.prototype.updateCard=function(e,t){var n=this,i={requestType:"cardChange",cancel:!1,addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]};t=(0,a.hX)(t)?this.getIndexFromData(i.changedRecords[0]):t,this.parent.trigger(d,i,(function(i){if(!i.cancel){if(n.parent.sortSettings.field&&"Index"===n.parent.sortSettings.sortBy){var a=[];e instanceof Array?a=e:a.push(e),e=n.priorityOrder(a,t)}var r={addedRecords:[],changedRecords:e instanceof Array?e:[e],deletedRecords:[]},o=e instanceof Array?"batch":"update";n.parent.dataModule.updateDataManager(o,r,"cardChanged",e,t)}}))},e.prototype.deleteCard=function(e){var t=this,n={addedRecords:[],changedRecords:[],deletedRecords:[]};n.deletedRecords="string"===typeof e||"number"===typeof e?this.parent.kanbanData.filter((function(n){return n[t.parent.cardSettings.headerField]===e})):e instanceof Array?e:[e];var i={requestType:"cardRemove",cancel:!1,addedRecords:[],changedRecords:[],deletedRecords:n.deletedRecords};this.parent.trigger(d,i,(function(e){if(!e.cancel){var i=n.deletedRecords.length>1?"batch":"delete",a=n.deletedRecords;t.parent.dataModule.updateDataManager(i,n,"cardRemoved",a[0])}}))},e.prototype.priorityOrder=function(e,t){for(var n,i=this,r=e.map((function(e){return e[i.parent.cardSettings.headerField]})),o=e[e.length-1][this.parent.sortSettings.field],l=e.map((function(e){return e[i.parent.keyField]})),s=l.filter((function(e,t){return l.indexOf(e)===t})).sort(),d=[],c=[],p=function(l){var s=e.filter((function(e){return e[i.parent.keyField]===l}));n=h.parent.layoutModule.getColumnData(l);for(var p=0,u=s;p<u.length;p++){var g=u[p];if(h.parent.swimlaneSettings.keyField){var m=h.parent.getSwimlaneData(g[h.parent.swimlaneSettings.keyField]);n=h.parent.getColumnData(l,m)}}if(s.forEach((function(e){return d.push(e)})),!(0,a.hX)(t)){for(var f=function(e){n.filter((function(n,a){n[i.parent.cardSettings.headerField]===r[e]&&a<=t&&c.push(a)}))},y=0;y<r.length;y++)f(y);if(c.length>0&&(t+=c.length),"Ascending"===h.parent.sortSettings.direction)for(var v=t;v<n.length;v++)-1===r.indexOf(n[v][h.parent.cardSettings.headerField])&&(n[v][h.parent.sortSettings.field]=++o,d.push(n[v]));else for(v=t-1;v>=0;v--)-1===r.indexOf(n[v][h.parent.cardSettings.headerField])&&(n[v][h.parent.sortSettings.field]=++o,d.push(n[v]))}},h=this,u=0,g=s;u<g.length;u++){p(g[u])}return d},e}(),We=function(){function e(e){this.parent=e,this.dragObj={element:null,cloneElement:null,instance:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]},this.dragEdges={left:!1,right:!1,top:!1,bottom:!1},this.isDragging=!1,this.isExternalDrop=!1}return e.prototype.wireDragEvents=function(e){var t;null!=!this.parent.element&&0===this.parent.externalDropId.length&&(t=this.parent.element.querySelector("."+Y)),this.dragObj.instance=new a.sx(e,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:t,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},e.prototype.dragHelper=function(e){if(this.parent.isAdaptive&&this.parent.touchModule.mobilePopup&&this.parent.touchModule.mobilePopup.element.classList.contains("e-popup-open")&&this.parent.touchModule.mobilePopup.hide(),this.dragObj.element=(0,a.kp)(e.sender.target,"."+oe),(0,a.hX)(this.dragObj.element))return null;this.dragObj.element.style.width=(0,a.IV)(this.dragObj.element.offsetWidth);var t=(0,a.n)("div",{innerHTML:this.dragObj.element.outerHTML});return this.dragObj.cloneElement=t.children.item(0),(0,a.iQ)([this.dragObj.cloneElement],Ce),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=(0,a.n)("div",{className:De}),this.dragObj.targetClone=(0,a.n)("div",{className:ke,styles:"width:100%;height:"+(0,a.IV)(this.dragObj.element.offsetHeight)}),this.dragObj.modifiedData=[],this.dragObj.cloneElement},e.prototype.dragStart=function(e){var t=this;if(this.dragObj.selectedCards=this.dragObj.element,this.dragObj.element.classList.contains(xe)){var n="."+oe+"."+xe+":not(."+Ce+")",i=(0,a.kp)(this.dragObj.element,"."+ee);this.dragObj.selectedCards=[].slice.call(i.querySelectorAll(n)),this.dragObj.selectedCards.forEach((function(e){t.dragObj.cardDetails.push(t.parent.getCardDetails(e))}))}else this.dragObj.cardDetails=[this.parent.getCardDetails(this.dragObj.element)];var r={cancel:!1,data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.parent.trigger("dragStart",r,(function(n){if(n.cancel)return t.removeElement(t.dragObj.cloneElement),t.dragObj.instance.intDestroy(e),t.dragObj.element=null,t.dragObj.targetClone=null,t.dragObj.draggedClone=null,t.dragObj.cloneElement=null,void(t.dragObj.targetCloneMulti=null);if(t.dragObj.element.classList.contains(xe)){if(t.dragObj.selectedCards.forEach((function(e){t.draggedClone(e)})),t.dragObj.selectedCards.length>1){t.dragObj.cloneElement.innerHTML="";var i=(0,a.n)("div",{className:"e-multi-card-text",innerHTML:t.dragObj.selectedCards.length+" Cards"});t.dragObj.cloneElement.appendChild(i),(0,a.pP)(t.dragObj.cloneElement,["e-multi-card-clone"],[xe]),t.parent.layoutModule.disableAttributeSelection(t.dragObj.cloneElement),t.dragObj.cloneElement.style.width="90px"}}else t.draggedClone(t.dragObj.element);a.Jm.add(document.body,"keydown",t.keydownHandler,t),t.parent.notify(g,{})}))},e.prototype.draggedClone=function(e){this.dragObj.draggedClone=(0,a.n)("div",{className:Se,styles:"width:"+(0,a.IV)(e.offsetWidth-1)+";height:"+(0,a.IV)(e.offsetHeight)}),e.insertAdjacentElement("afterend",this.dragObj.draggedClone),(0,a.iQ)([e],we)},e.prototype.drag=function(e){var t=this;if(e.target){var n=(0,a.kp)(e.target,"."+P+" ."+oe),i=n||e.target,r="."+ee+":not(."+te+") ."+U+"."+le,o=(0,a.kp)(i,r);if(this.externalDrop(i),this.kanbanObj=this.parent.isExternalKanbanDrop?this.parent.externalDropObj:this.parent,this.calculateArgs(e),o&&"not-allowed"!==document.body.style.cursor){var l=this.getColumnKey(o),s=l.split(",");this.multiCloneRemove();var d=l===this.getColumnKey((0,a.kp)(this.dragObj.draggedClone,"."+U));if(1===s.length||d)if(i.classList.contains(Se)&&this.removeElement(this.dragObj.targetClone,this.kanbanObj),i.classList.contains(oe)){var c=i.classList.contains(Se)&&i.previousElementSibling.classList.contains(we)?null:i.previousElementSibling,p="afterend";if((0,a.hX)(c)){var h=i.classList.contains(Se)?this.dragObj.pageY/2:this.dragObj.pageY,u=i.classList.contains(Se)?i.offsetHeight:i.offsetHeight/2;h-(this.kanbanObj.element.getBoundingClientRect().top+i.offsetTop)<u&&(p="beforebegin")}i.insertAdjacentElement(p,this.dragObj.targetClone)}else if(i.classList.contains(U)&&!(0,a.kp)(i,"."+te)){if(0!==i.querySelectorAll("."+we).length&&0===i.querySelectorAll("."+oe+":not(.e-kanban-dragged-card):not(.e-cloned-card)").length)return;i.querySelector("."+re).appendChild(this.dragObj.targetClone)}else i.classList.contains(re)&&!(0,a.kp)(i,"."+te)&&0===o.querySelectorAll("."+oe).length&&i.appendChild(this.dragObj.targetClone);else s.length>1&&o.classList.contains(Oe)&&this.multiCloneCreate(s,o);this.kanbanObj.notify(g,{})}0===this.kanbanObj.element.querySelectorAll("."+Oe).length&&this.cellDropping();var m=!1;o&&(m=o.classList.contains(me)&&o.classList.contains(Oe)),m&&(this.toggleVisible(i),(0,a.iQ)([o],Ae));var f=[].slice.call(this.kanbanObj.element.querySelectorAll("."+Ae));f.length>0&&!i.classList.contains(Ae)&&!(0,a.kp)(i,"."+Ae)&&(this.toggleVisible(i,f.slice(-1)[0]),(0,a.vy)(f,Ae)),this.kanbanObj.notify(g,{});var y=(0,a.kp)(i,"."+je);if(y){var v=[].slice.call(this.kanbanObj.element.querySelectorAll("."+je+":not(."+ce+")")).filter((function(e){return t.getColumnKey(e)===t.getColumnKey(y)}));v.length>0&&((0,a.iQ)(v,"e-multi-active"),v[0].previousElementSibling&&(0,a.iQ)([v[0].previousElementSibling],"e-multi-bottom-border"))}document.body.style.cursor=o&&o.classList.contains(Oe)?"":"not-allowed",n&&!(0,a.kp)(n,"."+U).classList.contains(Oe)&&(n.style.cursor="not-allowed",document.body.style.cursor="not-allowed"),this.isExternalDrop&&"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone,this.kanbanObj),this.multiCloneRemove()),this.updateScrollPosition();var b={data:this.dragObj.cardDetails,event:e,element:this.dragObj.selectedCards};this.kanbanObj.trigger("drag",b),this.parent.isExternalKanbanDrop=!1,this.isExternalDrop=!1}},e.prototype.removeElement=function(e,t){(t=t||this.parent).element.getElementsByClassName(e.className).length>0&&(0,a.TF)(e)},e.prototype.externalDrop=function(e){var t=this;this.parent.externalDropId.forEach((function(n){var i=(0,a.kp)(e,n);if(i)if(i.classList.contains("e-kanban")){t.parent.externalDropObj=document.querySelector(n).ej2_instances[0],t.parent.isExternalKanbanDrop=!0;var r="."+ee+":not(."+te+"):not(."+me+") ."+U,o=[].slice.call(t.parent.externalDropObj.element.querySelectorAll(r));(0,a.iQ)(o,Oe)}else t.isExternalDrop=!0}))},e.prototype.multiCloneCreate=function(e,t){var n=t.offsetHeight,i=t.querySelector("."+Ie);i&&(n-=i.offsetHeight),this.dragObj.targetCloneMulti.style.height=(0,a.IV)(n),t.querySelector("."+Ve)&&(0,a.iQ)([t.querySelector("."+Ve)],Ee),(0,a.iQ)([t.querySelector("."+re)],Ee),t.querySelector("."+re).style.height="auto",t.style.borderStyle="none",this.removeElement(this.dragObj.targetClone);for(var r=0,o=e;r<o.length;r++){var l=o[r],s=(0,a.kp)(this.dragObj.draggedClone,"."+U),d=this.kanbanObj.columns[s.cellIndex].transitionColumns,c=this.allowedTransition(this.dragObj.element.getAttribute("data-key"),l,d),p=c?"":" "+ce,h=(0,a.n)("div",{className:je+p,attrs:{"data-key":l.trim()}}),u=(0,a.n)("div",{className:"e-text",innerHTML:l.trim()});t.appendChild(this.dragObj.targetCloneMulti).appendChild(h).appendChild(u),h.style.cursor=c?"":"not-allowed",h.style.lineHeight=h.style.height=(0,a.IV)(n/e.length),u.style.top=(0,a.IV)(n/2-u.offsetHeight/2)}},e.prototype.allowedTransition=function(e,t,n){for(var i=!0,a=t.split(","),r=0;r<a.length;r++){if(e===a[r].trim())return!0;if(n){if(1===n.length&&0===n[0].length)return!0;for(var o=0;o<n.length;o++){if(a[r].trim()===n[o].trim())return!0;i=!1}}}return i},e.prototype.cellDropping=function(){var e=this,t=(0,a.kp)(this.dragObj.draggedClone,"."+U),n=(0,a.kp)(this.dragObj.draggedClone,"."+ee);if(this.addDropping(n,t),t&&t.classList.contains(de)&&(0,a.iQ)([t],Oe),this.kanbanObj.swimlaneSettings.keyField&&this.kanbanObj.swimlaneSettings.allowDragAndDrop){var i="."+ee+":not(."+te+"):not(."+me+")",r=[].slice.call(this.kanbanObj.element.querySelectorAll(i));[].slice.call(r).forEach((function(i){n!==i&&e.addDropping(i,t)}))}},e.prototype.addDropping=function(e,t){var n=this;t&&e&&[].slice.call(e.children).forEach((function(e){var i=n.kanbanObj.columns[t.cellIndex].transitionColumns;e!==t&&e.classList.contains(de)&&n.allowedTransition(t.getAttribute("data-key"),e.getAttribute("data-key"),i)&&(0,a.iQ)([e],Oe)}))},e.prototype.keydownHandler=function(e){"Escape"===e.code&&this.dragObj.cloneElement&&(a.Jm.remove(this.dragObj.cloneElement,"keydown",this.keydownHandler),this.dragObj.element.removeAttribute("aria-grabbed"),this.dragStopClear(),this.dragStopPostClear())},e.prototype.dragStop=function(e){var t,n,i,r=this,o=(0,a.kp)(this.dragObj.targetClone,"."+U);if(a.Jm.remove(document.body,"keydown",this.keydownHandler),this.dragObj.targetClone.parentElement){var l="."+oe+":not(."+we+"),."+ke;n=[].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(l)).indexOf(this.dragObj.targetClone)}(!(0,a.hX)(this.kanbanObj)&&this.kanbanObj.element.querySelector("."+De)&&(t=(0,a.kp)(e.target,"."+je+":not(."+ce+")")),o||t)&&(o?i=this.getColumnKey(o):(i=this.getColumnKey(t),o=(0,a.kp)(t,"."+U)),this.dragObj.selectedCards instanceof HTMLElement?this.updateDroppedData(this.dragObj.selectedCards,i,o):this.dragObj.selectedCards.forEach((function(e){r.updateDroppedData(e,i,o)})),this.parent.sortSettings.field&&"Index"===this.parent.sortSettings.sortBy&&this.changeOrder(this.dragObj.modifiedData));0===this.dragObj.modifiedData.length&&(this.dragObj.modifiedData=this.dragObj.cardDetails);var s={cancel:!1,data:this.dragObj.modifiedData,event:e,element:this.dragObj.selectedCards,dropIndex:n};this.parent.trigger("dragStop",s,(function(e){if(r.dragStopClear(),!e.cancel&&(o||t)){var n=e.data instanceof Array&&e.data.length>1?e.data:e.data[0];r.parent.crudModule.updateCard(n,e.dropIndex)}r.dragStopPostClear()}))},e.prototype.dragStopClear=function(){this.removeElement(this.dragObj.draggedClone),this.removeElement(this.dragObj.targetClone,this.kanbanObj),this.removeElement(this.dragObj.cloneElement),[].slice.call(this.parent.element.querySelectorAll("."+Se)).forEach((function(e){(0,a.TF)(e)})),this.dragObj.element.style.removeProperty("width"),this.multiCloneRemove(),this.dragObj.selectedCards instanceof HTMLElement?(0,a.vy)([this.dragObj.selectedCards],we):(0,a.vy)(this.dragObj.selectedCards,we),clearInterval(this.dragObj.navigationInterval),this.dragObj.navigationInterval=null,"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),[].slice.call(this.parent.element.querySelectorAll("."+oe+"[style]")).forEach((function(e){e.style.cursor=""}));var e="."+ee+":not(."+te+")";([].slice.call(this.parent.element.querySelectorAll(e+" ."+U)).forEach((function(e){return(0,a.vy)([e],Oe)})),this.parent.externalDropObj)&&[].slice.call(this.parent.externalDropObj.element.querySelectorAll(e+" ."+U)).forEach((function(e){return(0,a.vy)([e],Oe)}))},e.prototype.dragStopPostClear=function(){this.parent.isAdaptive&&(this.parent.touchModule.tabHold=!1),this.dragObj.cardDetails=this.dragObj.modifiedData=[],this.isDragging=!1,this.parent.isExternalKanbanDrop=!1,this.parent.externalDropObj=null},e.prototype.updateDroppedData=function(e,t,n){var i=this.parent.getCardDetails(e),r=(0,a.X$)({},i,null,!0);if(1===t.split(",").length&&(r[this.parent.keyField]=t),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var o=(0,a.kp)(n,"."+ee).previousElementSibling;if(this.parent.isAdaptive){var l=this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;r[this.parent.swimlaneSettings.keyField]=l}else r[this.parent.swimlaneSettings.keyField]=this.getColumnKey(o)}this.dragObj.modifiedData.push(r)},e.prototype.changeOrder=function(e){var t=this,n=!1,i="Ascending"===this.kanbanObj.sortSettings.direction?this.dragObj.targetClone.previousElementSibling:this.dragObj.targetClone.nextElementSibling;if(!i||i.classList.contains(we)||i.classList.contains(Ce)||i.classList.contains(Se))if(this.dragObj.targetClone.nextElementSibling&&"Ascending"===this.kanbanObj.sortSettings.direction)i=this.dragObj.targetClone.nextElementSibling;else{if(!this.dragObj.targetClone.previousElementSibling||"Descending"!==this.kanbanObj.sortSettings.direction)return;i=this.dragObj.targetClone.previousElementSibling}else n=!0;if(i.classList.contains(oe)){var a=this.kanbanObj.getCardDetails(i)[this.kanbanObj.sortSettings.field];e.length>1&&"Descending"===this.kanbanObj.sortSettings.direction&&(e=e.reverse()),e.forEach((function(e,i){n?e[t.kanbanObj.sortSettings.field]=++a:1!==a&&i<=e[t.kanbanObj.sortSettings.field]?e[t.kanbanObj.sortSettings.field]=--a:1===a&&(e[t.kanbanObj.sortSettings.field]=i+1)}))}},e.prototype.toggleVisible=function(e,t){var n=this,i="."+K+":not(."+W+")";[].slice.call(this.kanbanObj.element.querySelectorAll(i)).forEach((function(i){n.getColumnKey(i)===n.getColumnKey(t||e)&&n.kanbanObj.actionModule.columnToggle(i)}));var r=(0,a.kp)(this.dragObj.draggedClone,"."+U);if(r){var o=(0,a.IV)(r.offsetWidth-16);this.dragObj.draggedClone.style.width=o,this.dragObj.cloneElement.style.width=o}},e.prototype.multiCloneRemove=function(){var e=[].slice.call(this.kanbanObj.element.querySelectorAll("."+De));e.length>0&&([].slice.call(this.kanbanObj.element.querySelectorAll("."+je)).forEach((function(e){return(0,a.TF)(e)})),e.forEach((function(e){var t=(0,a.kp)(e,"."+U);t&&(t.style.borderStyle="",t.querySelector("."+Ve)&&(0,a.vy)([t.querySelector("."+Ve)],Ee),(0,a.vy)([t.querySelector("."+re)],Ee))})),this.removeElement(this.dragObj.targetCloneMulti,this.kanbanObj))},e.prototype.calculateArgs=function(e){var t=this.getPageCoordinates(e);this.dragObj.pageY=t.pageY,this.dragObj.pageX=t.pageX,this.isDragging=!0,this.kanbanObj.isAdaptive&&this.kanbanObj.tooltipModule&&this.kanbanObj.tooltipModule.tooltipObj.close()},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getColumnKey=function(e){return e&&e.getAttribute("data-key")?e.getAttribute("data-key").trim():""},e.prototype.updateScrollPosition=function(){var e=this;(0,a.hX)(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval((function(){e.autoScroll()}),100))},e.prototype.autoScrollValidation=function(){var e=this.dragObj.pageY,t=this.dragObj.pageX,n={left:!1,right:!1,top:!1,bottom:!1},i=this.kanbanObj.element.querySelector("."+Y).getBoundingClientRect();e<i.top+30+window.pageYOffset&&e>i.top+window.pageYOffset&&(n.top=!0),e>i.bottom-30+window.pageYOffset&&e<i.bottom+window.pageYOffset&&(n.bottom=!0),t<i.left+30+window.pageXOffset&&t>i.left+window.pageXOffset&&(n.left=!0),t>i.right-30+window.pageXOffset&&t<i.right+window.pageXOffset&&(n.right=!0),this.dragEdges=n},e.prototype.autoScroll=function(){this.autoScrollValidation();var e=30;if(this.kanbanObj.isAdaptive){var t;if(this.dragEdges.top||this.dragEdges.bottom?t=this.dragObj.targetClone?(0,a.kp)(this.dragObj.targetClone,"."+re):(0,a.kp)(this.dragObj.draggedClone,"."+re):(this.dragEdges.right||this.dragEdges.left)&&(t=this.kanbanObj.element.querySelector("."+Y)),t){var n=t.offsetHeight<=t.scrollHeight,i=t.offsetWidth<=t.scrollWidth,r=t.scrollTop>=0&&t.scrollTop+t.offsetHeight<=t.scrollHeight,o=t.scrollLeft>=0&&t.scrollLeft+t.offsetWidth<=t.scrollWidth;if(n&&r&&(this.dragEdges.top||this.dragEdges.bottom)&&(t.scrollTop+=this.dragEdges.top?-66:e),i&&o&&(this.dragEdges.left||this.dragEdges.right))(this.kanbanObj.layoutModule.getWidth()*(this.kanbanObj.columns.length-1)>t.scrollLeft||this.dragEdges.left)&&(t.scrollLeft+=this.dragEdges.left?-30:e)}}else{var l=this.kanbanObj.element.querySelector("."+Y),s=this.dragObj.targetClone.parentElement,d=l.offsetHeight<=l.scrollHeight,c=l.offsetWidth<=l.scrollWidth,p=d&&l.scrollTop>=0&&l.scrollTop+l.offsetHeight<=l.scrollHeight,h=c&&l.scrollLeft>=0&&l.scrollLeft+l.offsetWidth<=l.scrollWidth;p&&(this.dragEdges.top||this.dragEdges.bottom)&&(l.scrollTop+=this.dragEdges.top?-30:e,s&&(s.scrollTop+=this.dragEdges.top?-30:e)),h&&(this.dragEdges.left||this.dragEdges.right)&&(l.scrollLeft+=this.dragEdges.left?-30:e,s&&(s.scrollLeft+=this.dragEdges.left?-30:e)),this.dragObj.pageY-window.scrollY<e?window.scrollTo(window.scrollX,window.scrollY-e):window.innerHeight-(this.dragObj.pageY-window.scrollY)<e&&window.scrollTo(window.scrollX,window.scrollY+e)}},e.prototype.unWireDragEvents=function(e){var t=e.ej2_instances[0];t&&!t.isDestroyed&&t.destroy()},e}(),Ue=n(3890),Ye=n(6505),$e=n(7309),Ge=n(7665),Ze=n(6815),et=function(){function e(e){this.preventUpdate=!1,this.parent=e}return e.prototype.openDialog=function(e,t){this.action=e,this.parent.activeCardData.data=t,this.renderDialog(t,e),this.dialogObj.show()},e.prototype.closeDialog=function(){this.dialogObj.hide()},e.prototype.renderDialog=function(e,t){this.element=(0,a.n)("div",{id:this.parent.element.id+"_dialog_wrapper"}),this.parent.element.appendChild(this.element);var n={buttons:this.getDialogButtons(t),content:this.getDialogContent(e,t),cssClass:fe,enableRtl:this.parent.enableRtl,header:this.parent.localeObj.getConstant("Add"===t?"addTitle":"Edit"===t?"editTitle":"deleteTitle"),height:"auto",isModal:!0,showCloseIcon:!0,width:"Delete"===t?400:350,visible:!1,beforeOpen:this.onBeforeDialogOpen.bind(this),beforeClose:this.onBeforeDialogClose.bind(this)};this.dialogObj=new Ze.lG((0,a.X$)(n,"Delete"!==t&&this.parent.dialogSettings.model||{}),this.element),"Delete"!==t&&this.applyFormValidation(),this.dialogObj.element.querySelector(".e-dlg-closeicon-btn").title=this.parent.localeObj.getConstant("close")},e.prototype.getDialogContent=function(e,t){if("Delete"===t)return this.parent.localeObj.getConstant("deleteContent");var n=(0,a.n)("div",{className:"e-kanban-form-wrapper"}),i=(0,a.n)("form",{id:this.parent.element.id+"EditForm",className:ye,attrs:{onsubmit:"return false;"}});if(this.parent.dialogSettings.template){e&&(this.destroyComponents(),[].slice.call(i.childNodes).forEach((function(e){return(0,a.TF)(e)})));var r=this.parent.element.id+"_dialogTemplate",o=this.parent.templateParser(this.parent.dialogSettings.template)(e,this.parent,"dialogTemplate",r,!1);(0,a.BC)(o,i),this.parent.renderTemplates()}else{var l=(0,a.n)("div",{className:"e-kanban-dialog-content"});i.appendChild(l);var s=(0,a.n)("table");l.appendChild(s);for(var d=0,c=this.getDialogFields();d<c.length;d++){var p=c[d],h=(0,a.n)("tr");s.appendChild(h),h.appendChild((0,a.n)("td",{className:"e-label",innerHTML:p.text?p.text:p.key}));var u=(0,a.n)("td");h.appendChild(u),u.appendChild(this.renderComponents(p))}}return n.appendChild(i),n},e.prototype.getDialogFields=function(){var e=this.parent.dialogSettings.fields;return 0===e.length&&(e=[{text:"ID",key:this.parent.cardSettings.headerField,type:"TextBox"},{key:this.parent.keyField,type:"DropDown"},{key:this.parent.cardSettings.contentField,type:"TextArea"}],this.parent.sortSettings.field&&e.splice(e.length-1,0,{key:this.parent.sortSettings.field,type:"TextBox"}),this.parent.swimlaneSettings.keyField&&e.splice(e.length-1,0,{key:this.parent.swimlaneSettings.keyField,type:"DropDown"})),e},e.prototype.getDialogButtons=function(e){var t="Delete"===e?"e-dialog-no":"e-dialog-cancel",n=[{buttonModel:{cssClass:"e-flat "+("Delete"===e?"e-dialog-yes":"Add"===e?"e-dialog-add":"e-dialog-edit"),isPrimary:!0,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"save":"yes")},click:this.dialogButtonClick.bind(this)},{buttonModel:{cssClass:"e-flat "+t,isPrimary:!1,content:this.parent.localeObj.getConstant("Add"===e||"Edit"===e?"cancel":"no")},click:this.dialogButtonClick.bind(this)}];if("Edit"===e){var i={buttonModel:{cssClass:"e-flat e-dialog-delete",isPrimary:!1,content:this.parent.localeObj.getConstant("delete")},click:this.dialogButtonClick.bind(this)};n.splice(0,0,i)}return n},e.prototype.renderComponents=function(e){var t,n,i,r=(0,a.n)("div",{className:e.key+"_wrapper"}),o=(0,a.n)("input",{className:be,attrs:{name:e.key}});r.appendChild(o);var l=this.parent.activeCardData.data?this.parent.activeCardData.data[e.key]:null;switch(e.type){case"DropDown":if(e.key===this.parent.keyField){var s=this.parent.layoutModule.columnKeys;if(this.parent.actionModule.hideColumnKeys.length>0){s=[];for(var d=0;d<this.parent.columns.length;d++){if(this.parent.layoutModule.isColumnVisible(this.parent.columns[d]))s="number"===typeof this.parent.columns[d].keyField?s.concat(this.parent.columns[d].keyField.toString()):s.concat(this.parent.columns[d].keyField.split(",").map((function(e){return e.trim()})))}}n={dataSource:s,value:l?l.toString():l}}else e.key===this.parent.swimlaneSettings.keyField&&(n={dataSource:[].slice.call(this.parent.layoutModule.kanbanRows),fields:{text:"textField",value:"keyField"},value:l});i=new Ue.O(n);break;case"Numeric":i=new Ye.u({value:l});break;case"TextBox":i=new $e.f({value:l}),l&&this.parent.cardSettings.headerField===e.key&&(i.enabled=!1);break;case"TextArea":(0,a.TF)(o),t=(0,a.n)("div"),o=(0,a.n)("textarea",{className:be,attrs:{name:e.key,rows:"3"},innerHTML:l}),r.appendChild(t).appendChild(o)}return i&&i.appendTo(o),r},e.prototype.onBeforeDialogOpen=function(e){var t=this,n={data:this.parent.activeCardData.data,cancel:!1,element:this.element,target:this.parent.activeCardData.element,requestType:this.action};this.storeElement=document.activeElement,parseInt(e.maxHeight,10)<=250&&(e.maxHeight="250px"),this.parent.trigger("dialogOpen",n,(function(n){e.cancel=n.cancel,n.cancel&&t.destroy()}))},e.prototype.onBeforeDialogClose=function(e){var t=this,n=this.getFormElements(),i={};if(e.isInteracted&&(this.preventUpdate=!0),!this.preventUpdate)for(var r=0,o=n;r<o.length;r++){var l=o[r],s=l.name||this.getColumnName(l);if(!(0,a.hX)(s)&&""!==s){var d=this.getValueFromElement(l);s===this.parent.cardSettings.headerField&&(d="string"===this.getIDType()?d:parseInt(d,10)),i[s]=d}}this.preventUpdate=!1;var c={data:i=(0,a.X$)(this.parent.activeCardData.data,i),cancel:!1,element:this.element,requestType:this.action};this.parent.trigger("dialogClose",c,(function(n){e.cancel=n.cancel,n.cancel||(t.cardData=c.data,t.destroy(),t.parent.actionModule.SingleCardSelection(t.cardData))}))},e.prototype.getIDType=function(){return 0!==this.parent.kanbanData.length?typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField]:"string"},e.prototype.applyFormValidation=function(){for(var e=this,t=this.element.querySelector("."+ye),n={},i=0,a=this.parent.dialogSettings.fields;i<a.length;i++){var r=a[i];n[r.key]=r.validationRules&&Object.keys(r.validationRules).length>0?r.validationRules:null}this.formObj=new Ge.tL(t,{rules:n,customPlacement:function(t,n){var i=n.getAttribute("for");e.element.querySelector("#"+i+"_Error")||e.createTooltip(t,n,i,"")},validationComplete:function(t){var n=e.element.querySelector("#"+t.inputName+"_Error");n&&(n.style.display="failure"===t.status?"":"none")}})},e.prototype.createTooltip=function(e,t,n,i){var r,o,l=e.parentElement.getBoundingClientRect();this.element.classList.contains(fe)?(r=this.element,o=this.element.getBoundingClientRect()):o=(r=this.element.querySelector(".e-kanban-dialog .e-dlg-content")).getBoundingClientRect();var s=(0,a.n)("div",{className:"e-tooltip-wrap e-popup "+ve,id:n+"_Error",styles:"display:"+i+";top:"+(l.bottom-o.top+r.scrollTop+9)+"px;left:"+(l.left-o.left+r.scrollLeft+l.width/2)+"px;"}),d=(0,a.n)("div",{className:"e-tip-content"});d.appendChild(t);var c=(0,a.n)("div",{className:"e-arrow-tip e-tip-top"});c.appendChild((0,a.n)("div",{className:"e-arrow-tip-outer e-tip-top"})),c.appendChild((0,a.n)("div",{className:"e-arrow-tip-inner e-tip-top"})),s.appendChild(d),s.appendChild(c),r.appendChild(s),s.style.left=parseInt(s.style.left,10)-s.offsetWidth/2+"px"},e.prototype.destroyToolTip=function(){this.element&&this.element.querySelectorAll("."+ve).forEach((function(e){return(0,a.TF)(e)})),this.formObj&&this.formObj.element&&this.formObj.reset()},e.prototype.dialogButtonClick=function(e){var t=e.target.cloneNode(!0),n=this.formObj.element.id;if(document.getElementById(n)&&this.formObj.validate()&&(t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add"))){if(this.dialogObj.hide(),t.classList.contains("e-dialog-edit")){var i=this.parent.activeCardData,a=void 0;i.data[this.parent.keyField]===this.cardData[this.parent.keyField]&&i.element&&(a=[].slice.call(i.element.parentElement.children).indexOf(i.element)),this.parent.crudModule.updateCard(this.cardData,a)}t.classList.contains("e-dialog-add")&&this.parent.crudModule.addCard(this.cardData),this.parent.actionModule.SingleCardSelection(this.cardData),this.cardData=null}t.classList.contains("e-dialog-edit")||t.classList.contains("e-dialog-add")||(t.classList.contains("e-dialog-cancel")&&(this.preventUpdate=!0),this.dialogObj.hide(),t.classList.contains("e-dialog-yes")?this.parent.crudModule.deleteCard(this.parent.activeCardData.data):t.classList.contains("e-dialog-no")?this.openDialog("Edit",this.parent.activeCardData.data):t.classList.contains("e-dialog-delete")&&this.openDialog("Delete",this.parent.activeCardData.data))},e.prototype.getFormElements=function(){for(var e=[],t=0,n=[].slice.call(this.element.querySelectorAll("."+be));t<n.length;t++){var i=n[t];i.classList.contains("e-control")?e.push(i):i.querySelector(".e-control")?e.push(i.querySelector(".e-control")):e.push(i)}return e},e.prototype.getColumnName=function(e){var t=e.getAttribute("data-name")||"";if(""===t){var n=!1,i="";e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?(i=e.classList.contains("e-dropdownlist")?"e-ddl":"e-multiselect",n=!0):e.classList.contains("e-numerictextbox")&&(i="e-numeric");var r=n?"."+i+":not(.e-control)":"."+i,o=(0,a.kp)(e,r)||e.querySelector("."+i);if(o){var l=o.querySelector("[name]");l&&(t=l.name)}}return t},e.prototype.getValueFromElement=function(e){return e.classList.contains("e-dropdownlist")||e.classList.contains("e-multiselect")?e.ej2_instances[0].value:e.classList.contains("e-checkbox")?e.ej2_instances[0].checked:"checkbox"===e.type?e.checked:e.value},e.prototype.destroyComponents=function(){for(var e=0,t=this.getFormElements();e<t.length;e++){var n=t[e].ej2_instances;n&&n.length>0&&n.forEach((function(e){return e.destroy()}))}},e.prototype.destroy=function(){this.destroyToolTip(),this.destroyComponents(),this.dialogObj&&(this.dialogObj.destroy(),this.storeElement.focus(),this.dialogObj=null,(0,a.TF)(this.element),this.element=null)},e}(),tt=function(){function e(e){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",multiSelectionEnter:"ctrl+13",multiSelectionSpace:"ctrl+32",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",shiftTab:"shift+tab",enter:"13",tab:"tab",delete:"46",escape:"27",space:"32"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new a.j9(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.multiSelection=!1}return e.prototype.keyActionHandler=function(e){var t=this,n=this.parent.element.querySelectorAll("."+oe+"."+xe).item(0);if(n||(0,a.kp)(document.activeElement,"."+P)){var i,r=[];switch(e.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":e.preventDefault(),this.processUpDownArrow(e.action,n);break;case"rightArrow":case"leftArrow":this.processLeftRightArrow(e);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(e.action,n);break;case"multiSelectionEnter":case"multiSelectionSpace":document.activeElement&&this.parent.actionModule.cardSelection(document.activeElement,!0,!1);break;case"space":case"enter":this.processEnter(e,n);break;case"escape":if(document.activeElement.classList.contains(oe)||document.activeElement.classList.contains(Ve))if(document.activeElement.classList.contains(xe))(0,a.vy)([document.activeElement],xe),document.activeElement.focus();else{var o=(0,a.kp)(document.activeElement,"."+U),l=[].slice.call(o.querySelectorAll("."+oe));(0,a.vy)(l,xe),o.focus(),this.cardTabIndexRemove(),this.addRemoveTabIndex("Add")}break;case"tab":case"shiftTab":i=(0,a.kp)(document.activeElement,"."+U),document.activeElement.classList.contains(oe)&&(document.activeElement.nextElementSibling||"tab"!==e.action||e.preventDefault(),!document.activeElement.previousElementSibling&&i.querySelector("."+Ve)&&"tab"===e.action&&(0,a.iQ)([i.querySelector("."+Ve)],ze)),document.activeElement.classList.contains(Ve)&&(!i.querySelector("."+oe)&&"tab"===e.action||"shiftTab"===e.action)&&e.preventDefault(),document.activeElement.classList.contains(P)&&(this.cardTabIndexRemove(),this.parent.keyboardModule.addRemoveTabIndex("Add"));break;case"delete":[].slice.call(this.parent.element.querySelectorAll("."+oe+"."+xe)).forEach((function(e){r.push(t.parent.getCardDetails(e))})),this.parent.crudModule.deleteCard(r)}}},e.prototype.processCardSelection=function(e,t){if(t){(0,a.vy)([t],xe),this.parent.layoutModule.disableAttributeSelection(t);var n=this.parent.actionModule.selectionArray;n.splice(n.indexOf(t.getAttribute("data-id")),1)}this.cardTabIndexRemove();var i=[].slice.call(this.parent.element.querySelectorAll("."+oe)),r="firstCardSelection"===e?i[0]:i[i.length-1];this.parent.actionModule.cardSelection(r,!1,!1),this.addRemoveTabIndex("Remove"),r.focus(),[].slice.call((0,a.kp)(r,"."+U).querySelectorAll("."+oe)).forEach((function(e){e.setAttribute("tabindex","0")}))},e.prototype.processLeftRightArrow=function(e){document.activeElement.classList.contains(U)&&("rightArrow"===e.action&&document.activeElement.nextElementSibling?document.activeElement.nextElementSibling.focus():"leftArrow"===e.action&&document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus())},e.prototype.processUpDownArrow=function(e,t){if("upArrow"===e&&document.activeElement){if(document.activeElement.classList.contains(oe)&&document.activeElement.previousElementSibling)document.activeElement.previousElementSibling.focus();else if(document.activeElement.classList.contains(Ve)){document.activeElement.setAttribute("tabindex","-1"),(0,a.vy)([document.activeElement],ze);var n=(0,a.kp)(document.activeElement,"."+U);n.querySelectorAll("."+oe).length>0&&[].slice.call(n.querySelectorAll("."+oe)).slice(-1)[0].focus()}this.removeSelection()}else if("downArrow"===e&&document.activeElement&&document.activeElement.classList.contains(oe)){if(document.activeElement.nextElementSibling)document.activeElement.nextElementSibling.focus();else if((0,a.kp)(document.activeElement,"."+re).nextElementSibling){var i=(0,a.kp)(document.activeElement,"."+re).nextElementSibling;i.setAttribute("tabindex","0"),(0,a.iQ)([i],ze),i.focus()}this.removeSelection()}if(("multiSelectionByUpArrow"===e||"multiSelectionByDownArrow"===e)&&t&&"Multiple"===this.parent.cardSettings.selectionType){var r=void 0;(r="multiSelectionByUpArrow"===e?document.activeElement.previousElementSibling:document.activeElement.nextElementSibling)&&(this.parent.actionModule.cardSelection(r,!1,!0),r.focus(),this.multiSelection=!0)}},e.prototype.removeSelection=function(){if(this.multiSelection){var e=this.parent.getSelectedCards();e.length>0&&((0,a.vy)(e,xe),this.parent.layoutModule.disableAttributeSelection(e)),this.multiSelection=!1}},e.prototype.cardTabIndexRemove=function(){[].slice.call(this.parent.element.querySelectorAll("."+oe)).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.parent.element.querySelectorAll("."+Ve)).forEach((function(e){e.setAttribute("tabindex","-1"),(0,a.vy)([e],ze)}))},e.prototype.processEnter=function(e,t){"space"===e.action&&e.preventDefault();var n=e.target;if(n.classList.contains(J)&&this.parent.actionModule.columnExpandCollapse(e),(n.classList.contains(ne)||n.classList.contains(ie))&&this.parent.actionModule.rowExpandCollapse(e),document.activeElement.classList.contains(oe)&&this.parent.actionModule.cardSelection(document.activeElement,!1,!1),document.activeElement.classList.contains(Ve)&&(this.parent.dialogModule.dialogObj||this.parent.actionModule.addButtonClick(document.activeElement),document.activeElement.focus()),n.classList.contains(U)){var i=[].slice.call(n.querySelectorAll("."+oe));this.addRemoveTabIndex("Remove"),i.length>0&&(n.querySelector("."+oe).focus(),i.forEach((function(e){e.setAttribute("tabindex","0")}))),n.querySelector("."+Ve)&&(n.querySelector("."+Ve).setAttribute("tabindex","0"),n.querySelector("."+Ve).focus())}t===document.activeElement&&1===this.parent.element.querySelectorAll("."+xe).length&&(this.parent.activeCardData={data:this.parent.getCardDetails(t),element:t},this.parent.dialogModule.dialogObj||this.parent.dialogModule.openDialog("Edit",this.parent.getCardDetails(t)),t.focus())},e.prototype.addRemoveTabIndex=function(e){var t="Add"===e?"0":"-1",n=[].slice.call(this.parent.element.querySelectorAll("."+J));n.length>0&&n.forEach((function(e){e.setAttribute("tabindex",t)}));var i=[].slice.call(this.parent.element.querySelectorAll("."+ne));i.length>0&&i.forEach((function(e){e.setAttribute("tabindex",t)}));var a="."+ee+":not(."+te+") ."+U;[].slice.call(this.parent.element.querySelectorAll(a)).forEach((function(e){e.setAttribute("tabindex",t)}))},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),nt=n(8147),it=function(){function e(e){this.parent=e,this.renderTooltip()}return e.prototype.renderTooltip=function(){this.tooltipObj=new nt.m({cssClass:this.parent.cssClass+" e-kanban-tooltip",enableRtl:this.parent.enableRtl,mouseTrail:!this.parent.isAdaptive,offsetY:5,position:"BottomCenter",showTipPointer:!0,target:"."+Fe,beforeRender:this.onBeforeRender.bind(this),beforeClose:this.onBeforeClose.bind(this)}),this.tooltipObj.appendTo(this.parent.element),this.tooltipObj.isStringTemplate=!0},e.prototype.onBeforeRender=function(e){if(this.parent.dragAndDropModule.isDragging)e.cancel=!0;else{var t;if(this.parent.tooltipTemplate){t=(0,a.n)("div");var n=(0,a.kp)(e.target,"."+oe),i=this.parent.getCardDetails(n),r=this.parent.element.id+"_tooltipTemplate",o=this.parent.templateParser(this.parent.tooltipTemplate)(i,this.parent,"tooltipTemplate",r,!1);(0,a.BC)(o,t),this.parent.renderTemplates()}else t='<div class="e-card-header-caption">'+e.target.innerText+"</div>";this.tooltipObj.setProperties({content:t},!0)}},e.prototype.onBeforeClose=function(){this.parent.resetTemplates(["tooltipTemplate"])},e.prototype.destroy=function(){this.tooltipObj.destroy(),(0,a.iQ)([this.parent.element],"e-control"),this.tooltipObj=null},e}(),at=n(155),rt=n(2819),ot=function(){function e(e){this.parent=e,this.tabHold=!1}return e.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+Y),this.touchObj=new a.Up(this.element,{tapHold:this.tapHoldHandler.bind(this)})},e.prototype.tapHoldHandler=function(e){this.tabHold=!0;var t=(0,a.kp)(e.originalEvent.target,"."+oe);t&&"Multiple"===this.parent.cardSettings.selectionType&&(this.parent.actionModule.cardSelection(t,!0,!1),this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},e.prototype.renderMobilePopup=function(){if("Multiple"===this.parent.cardSettings.selectionType){var e=(0,a.n)("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="'+_e+'"></button></div><div class="'+Be+'"></div>'});document.body.appendChild(e),(0,a.iQ)([e],N),this.mobilePopup=new at.zD(e,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)});var t=this.mobilePopup.element.querySelector("."+_e),n=new rt.$({cssClass:"e-flat e-round e-small",enableRtl:this.parent.enableRtl,iconCss:H+" e-close-icon"});n.appendTo(t),n.isStringTemplate=!0,a.Jm.add(t,"click",this.closeClick,this)}},e.prototype.getPopupContent=function(){var e,t=this.parent.getSelectedCards();return t.length>1?e="("+t.length+") "+this.parent.localeObj.getConstant("cardsSelected"):1===t.length&&(e=" "+this.parent.getCardDetails(t[0])[this.parent.cardSettings.headerField]),e},e.prototype.updatePopupContent=function(){if(this.mobilePopup){var e=this.getPopupContent();e?this.mobilePopup.element.querySelector("."+Be).textContent=e:this.mobilePopup.hide()}},e.prototype.closeClick=function(){this.parent.touchModule.mobilePopup.hide()},e.prototype.popupClose=function(){this.popupDestroy()},e.prototype.popupDestroy=function(){if(this.mobilePopup&&this.mobilePopup.element){var e=this.mobilePopup.element.querySelector(".e-control.e-btn").ej2_instances[0];e&&e.destroy(),this.mobilePopup.destroy(),(0,a.TF)(this.mobilePopup.element),this.mobilePopup=null}},e.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy(),this.touchObj=null,this.element=null},e.prototype.destroy=function(){this.popupDestroy(),this.unWireTouchEvents(),this.tabHold=!1},e}(),lt=n(6871),st=function(){function e(e){this.parent=e}return e.prototype.renderSwimlaneHeader=function(){var e=(0,a.n)("div",{className:Te,innerHTML:'<div class="e-swimlane-header-toolbar"><div class="e-toolbar-menu"><div class="e-icons '+Me+'"></div></div><div class="e-toolbar-level-title"><div class="'+Re+'"></div></div></div>'});this.parent.element.appendChild(e),a.Jm.add(e.querySelector("."+Me),"click",this.menuClick,this)},e.prototype.renderSwimlaneTree=function(){var e=this.parent.element.querySelector("."+Te).offsetHeight,t=window.innerHeight-e;this.popupOverlay=(0,a.n)("div",{className:qe,styles:"height: "+t+"px;"});var n=(0,a.n)("div",{className:Le,styles:"top:"+e+"px;"}),i=(0,a.n)("div",{className:Pe+" e-popup-close",styles:"height: "+t+"px;"});n.appendChild(i),n.appendChild(this.popupOverlay),this.parent.element.appendChild(n);var r=(0,a.n)("div",{className:"e-swimlane-tree"});i.appendChild(r),this.treeViewObj=new lt.GS({cssClass:this.parent.cssClass,enableRtl:this.parent.enableRtl,fields:{dataSource:this.parent.layoutModule.kanbanRows,id:"keyField",text:"textField"},nodeTemplate:this.parent.swimlaneSettings.template,nodeClicked:this.treeSwimlaneClick.bind(this),drawNode:this.drawNode.bind(this)}),this.treeViewObj.appendTo(r);var o={targetType:"relative",actionOnScroll:"none",enableRtl:this.parent.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.parent.element.querySelector("."+Y)};o.content=this.treeViewObj.element,this.treePopup=new at.zD(i,o)},e.prototype.menuClick=function(){if(this.parent.element.querySelector("."+Pe).classList.contains("e-popup-open"))this.treePopup.hide(),(0,a.vy)([this.popupOverlay],"e-enable");else{var e=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));(0,a.vy)(e,"e-active"),(0,a.iQ)([e[this.parent.layoutModule.swimlaneIndex]],"e-active"),this.treePopup.show(),(0,a.iQ)([this.popupOverlay],"e-enable")}},e.prototype.treeSwimlaneClick=function(e){this.treePopup.hide();var t=[].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));this.parent.layoutModule.swimlaneIndex=t.indexOf(e.node),this.parent.layoutModule.scrollLeft=0,this.parent.notify(m,{processedData:this.parent.kanbanData}),e.event.preventDefault()},e.prototype.hidePopup=function(){this.treePopup.hide(),(0,a.vy)([this.popupOverlay],"e-enable")},e.prototype.getWidth=function(){return 80*window.innerWidth/100},e.prototype.drawNode=function(e){if(this.parent.swimlaneSettings.template&&this.parent.isReact){var t=this.parent.element.id+"_treeviewTemplate",n=this.parent.templateParser(this.parent.swimlaneSettings.template)(e.nodeData,this.parent,"nodeTemplate",t,!1);(0,a.BC)(n,e.node.querySelector(".e-list-text"))}},e}(),dt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ct=function(e){function t(t){var n=e.call(this,t)||this;return n.kanbanRows=[],n.parent=t,n.columnKeys=[],n.swimlaneIndex=0,n.swimlaneData={},n.scrollLeft=0,n.frozenOrder=0,n.parent.on(m,n.initRender,n),n.parent.on(g,n.scrollUiUpdate,n),n}return dt(t,e),t.prototype.initRender=function(){if(0!==this.parent.columns.length){if(this.columnData=this.getColumnCards(),this.kanbanRows=this.getRows(),this.swimlaneData=this.getSwimlaneCards(),this.parent.isAdaptive){var e=this.parent.element.querySelector("."+Y);e&&(this.scrollLeft=e.scrollLeft)}this.destroy(),this.parent.on(m,this.initRender,this),this.parent.on(g,this.scrollUiUpdate,this),this.parent.isAdaptive&&this.parent.swimlaneSettings.keyField&&0!==this.parent.kanbanData.length&&this.renderSwimlaneHeader();var t=(0,a.n)("div",{className:z});this.parent.element.appendChild(t),this.renderHeader(t),this.renderContent(),this.renderCards(),this.renderValidation(),this.parent.renderTemplates(),this.parent.notify(g,{}),this.wireEvents(),this.parent.isInitialRender&&(this.parent.isInitialRender=!1)}},t.prototype.renderHeader=function(e){var t=(0,a.n)("div",{className:this.parent.swimlaneSettings.keyField?B:""});e.appendChild(t);var n=(0,a.n)("table",{className:V+" e-header-table",attrs:{role:"presentation"}});t.appendChild(n),this.renderColGroup(n);var i=(0,a.n)("thead");n.appendChild(i),this.parent.stackedHeaders.length>0&&i.appendChild(this.createStackedRow(this.parent.stackedHeaders));var r=(0,a.n)("tr",{className:Z});i.appendChild(r);for(var o=function(e){if(l.isColumnVisible(e)){var t=l.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),n=(0,a.n)("th",{className:-1===t?K:K+" "+me,attrs:{"data-role":"kanban-column","data-key":e.keyField.toString()}}),i=[];e.allowToggle&&(i.push(G),e.isExpanded||i.push(me)),(0,a.iQ)([n],i);var o=(0,a.n)("div",{className:Q});n.appendChild(o);var s=l.columnData[e.keyField].length,d=(0,a.n)("div",{className:"e-header-title"});if(o.appendChild(d),e.template){var c={keyField:e.keyField,headerText:e.headerText,minCount:e.minCount,maxCount:e.maxCount,allowToggle:e.allowToggle,isExpanded:e.isExpanded,showItemCount:e.showItemCount,count:s};(0,a.iQ)([n],_);var p=l.parent.element.id+"_columnTemplate",u=l.parent.templateParser(e.template)(c,l.parent,"columnTemplate",p,!1);(0,a.BC)(u,d)}else{var g=(0,a.n)("div",{className:X,innerHTML:e.headerText});if(d.appendChild(g),e.showItemCount){var m=(0,a.n)("div",{className:ae,innerHTML:"- "+s.toString()+" "+l.parent.localeObj.getConstant("items")});d.appendChild(m)}}if(e.allowToggle){var f=!(!e.isExpanded||-1!==t),y=f?he:ue,v=(0,a.n)("div",{className:J+" "+H+" "+y,attrs:{tabindex:"0"}});v.setAttribute("aria-label",f?e.keyField+" Expand":e.keyField+" Collapse"),n.setAttribute("aria-expanded",f.toString()),o.appendChild(v)}var b={data:[{keyField:e.keyField,textField:e.headerText,count:s}],element:r,cancel:!1,requestType:"headerRow"};l.parent.trigger(h,b,(function(e){e.cancel||r.appendChild(n)}))}},l=this,s=0,d=this.parent.columns;s<d.length;s++){o(d[s])}},t.prototype.renderContent=function(){var e=(0,a.n)("div",{className:Y});this.parent.element.appendChild(e);var t=(0,a.n)("div",{className:this.parent.swimlaneSettings.keyField?B:""});e.appendChild(t);var n=(0,a.n)("table",{className:V+" "+$,attrs:{role:"presentation"}});t.appendChild(n),this.renderColGroup(n);var i=(0,a.n)("tbody");n.appendChild(i);var r=!1;this.swimlaneRow=this.kanbanRows,this.initializeSwimlaneTree();for(var o=0,l=this.swimlaneRow;o<l.length;o++){var s=l[o];if(this.parent.swimlaneSettings.keyField&&0!==this.parent.swimlaneToggleArray.length)r=-1!==this.parent.swimlaneToggleArray.indexOf(s.keyField);this.parent.swimlaneSettings.keyField&&!this.parent.isAdaptive&&this.renderSwimlaneRow(i,s,r),this.renderSingleContent(i,s,r)}},t.prototype.renderSingleContent=function(e,t,n){for(var i=n?ee+" "+me:ee,r=(0,a.n)("tr",{className:i,attrs:{"aria-expanded":"true"}}),o=0,l=this.parent.columns;o<l.length;o++){var s=l[o];if(this.isColumnVisible(s)){var d=this.parent.actionModule.columnToggleArray.indexOf(s.keyField.toString()),c=-1===d?U:U+" "+me,p=(s.allowDrag?" "+se:"")+(s.allowDrop?" "+de+" "+le:""),u=(0,a.n)("td",{className:c+p,attrs:{"data-role":"kanban-column","data-key":s.keyField.toString(),"aria-expanded":"true",tabindex:"0",role:"navigation"}});if(s.allowToggle&&!s.isExpanded||-1!==d){(0,a.iQ)([u],me);var g=(s.showItemCount?"["+this.getColumnData(s.keyField,this.swimlaneData[t.keyField]).length+"] ":"")+s.headerText;u.appendChild((0,a.n)("div",{className:ge,innerHTML:g})),u.setAttribute("aria-expanded","false")}if(s.showAddButton){var m=(0,a.n)("div",{className:Ve,attrs:{tabindex:"-1"}});m.appendChild((0,a.n)("div",{className:"e-show-add-icon "+H})),u.appendChild(m)}r.appendChild(u)}}var f={data:[{keyField:t.keyField,textField:t.textField,count:t.count}],element:r,cancel:!1,requestType:"contentRow"};this.parent.trigger(h,f,(function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",r):e.appendChild(r))}))},t.prototype.initializeSwimlaneTree=function(){this.parent.swimlaneSettings.keyField&&this.parent.isAdaptive&&0!==this.parent.kanbanData.length&&(this.swimlaneRow=[this.kanbanRows[this.swimlaneIndex]],this.renderSwimlaneTree(),this.parent.element.querySelector("."+Re).innerHTML=this.swimlaneRow[0].textField)},t.prototype.renderSwimlaneRow=function(e,t,n){var i=ee+" "+te,r=n?" "+me:"",o=(0,a.n)("tr",{className:i+r,attrs:{"data-key":t.keyField,"aria-expanded":(!n).toString()}}),l=this.parent.columns.length-this.parent.actionModule.hideColumnKeys.length,s=(0,a.n)("td",{className:U,attrs:{"data-role":"kanban-column",colspan:l.toString()}}),d=(0,a.n)("div",{className:Te});s.appendChild(d);var c=n?ie:ne,p=(0,a.n)("div",{className:H+" "+c,attrs:{tabindex:"0","aria-label":n?t.keyField+" Collapse":t.keyField+" Expand"}});d.appendChild(p);var u=(0,a.n)("div",{className:Q});d.appendChild(u);var g=this.swimlaneData[t.keyField].length;if(this.parent.swimlaneSettings.template){var m=(0,a.X$)({},t,{count:g},!0);(0,a.iQ)([s],_);var f=this.parent.element.id+"_swimlaneTemplate",y=this.parent.templateParser(this.parent.swimlaneSettings.template)(m,this.parent,"swimlaneTemplate",f,!1);(0,a.BC)(y,u)}else u.appendChild((0,a.n)("div",{className:"e-swimlane-text",innerHTML:t.textField,attrs:{"data-role":t.textField}}));this.parent.swimlaneSettings.showItemCount&&d.appendChild((0,a.n)("div",{className:ae,innerHTML:"- "+g.toString()+" "+this.parent.localeObj.getConstant("items")})),o.appendChild(s);var v={data:[{keyField:t.keyField,textField:t.textField,count:t.count}],element:o,cancel:!1,requestType:"swimlaneRow"};this.parent.trigger(h,v,(function(t){t.cancel||(e.classList.contains("e-swimlane-row")?e.insertAdjacentElement("beforebegin",o):e.appendChild(o))}))},t.prototype.renderCards=function(){var e=this,t=this.swimlaneRow,n=[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)")),i=[].slice.call(this.parent.element.querySelectorAll(".e-content-row.e-swimlane-row")),r=[];n.forEach((function(n,o){for(var l=0,s=function(i){if(e.isColumnVisible(i)){var r=e.parent.swimlaneSettings.keyField?e.getColumnData(i.keyField,e.swimlaneData[t[o].keyField]):e.columnData[i.keyField];l+=r.length;var s=n.querySelector('[data-key="'+i.keyField+'"]'),d=(0,a.n)("div",{className:re,attrs:{role:"listbox"}});if(s.appendChild(d),r.length>0)for(var c=function(t){var n=t[e.parent.cardSettings.headerField],i=e.parent.actionModule.selectionArray.indexOf(n),r=e.renderCard(t);-1!==i&&(r.setAttribute("aria-selected","true"),(0,a.iQ)([r],xe));var o={data:t,element:r,cancel:!1};e.parent.trigger(p,o,(function(e){e.cancel||d.appendChild(r)}))},h=0,u=r;h<u.length;h++){c(u[h])}else d.appendChild(e.renderEmptyCard())}},d=0,c=e.parent.columns;d<c.length;d++){s(c[d])}0===l&&(r.push(n),i.length>0&&r.push(i[o]))})),this.parent.swimlaneSettings.showEmptyRow||0!==this.parent.kanbanData.length||this.parent.showEmptyColumn||r.forEach((function(e){return(0,a.TF)(e)}))},t.prototype.renderCard=function(e){var t=(0,a.n)("div",{className:oe,attrs:{"data-id":e[this.parent.cardSettings.headerField],"data-key":e[this.parent.keyField],"aria-selected":"false",tabindex:"-1",role:"option"}});if(this.parent.cardSettings.template){(0,a.iQ)([t],_);var n=this.parent.element.id+"_cardTemplate",i=this.parent.templateParser(this.parent.cardSettings.template)(e,this.parent,"cardTemplate",n,!1);(0,a.BC)(i,t)}else{var r=this.parent.enableTooltip?" "+Fe:"";if(this.parent.cardSettings.showHeader){var o=(0,a.n)("div",{className:"e-card-header"}),l=(0,a.n)("div",{className:"e-card-header-caption"}),s=(0,a.n)("div",{className:"e-card-header-title"+r,innerHTML:e[this.parent.cardSettings.headerField]||""});o.appendChild(l),l.appendChild(s),t.appendChild(o)}var d=(0,a.n)("div",{className:"e-card-content"+r,innerHTML:e[this.parent.cardSettings.contentField]||""});if(t.appendChild(d),this.parent.cardSettings.tagsField&&e[this.parent.cardSettings.tagsField]){for(var c=(0,a.n)("div",{className:"e-card-tags"}),p=0,h=e[this.parent.cardSettings.tagsField].toString().split(",");p<h.length;p++){var u=h[p];c.appendChild((0,a.n)("div",{className:"e-card-tag e-card-label",innerHTML:u}))}t.appendChild(c)}if(this.parent.cardSettings.grabberField&&e[this.parent.cardSettings.grabberField]&&((0,a.iQ)([t],"e-card-color"),t.style.borderLeftColor=e[this.parent.cardSettings.grabberField]),this.parent.cardSettings.footerCssField){for(var g=(0,a.n)("div",{className:"e-card-footer"}),m=0,f=e[this.parent.cardSettings.footerCssField].split(",");m<f.length;m++){var y=f[m];g.appendChild((0,a.n)("div",{className:y.trim()+" e-card-footer-css"}))}t.appendChild(g)}}return t},t.prototype.renderEmptyCard=function(){return(0,a.n)("span",{className:pe,innerHTML:this.parent.localeObj.getConstant("noCard")})},t.prototype.renderColGroup=function(e){var t=this,n=(0,a.n)("colgroup");this.parent.columns.forEach((function(e){if(t.isColumnVisible(e)){var i=t.parent.actionModule.columnToggleArray.indexOf(e.keyField.toString()),r=e.allowToggle&&!e.isExpanded,o=-1===i?r?me:"":me,l=(0,a.n)("col",{className:o,attrs:{"data-key":e.keyField.toString()},styles:t.parent.isAdaptive?"width: "+(r?(0,a.IV)(50):(0,a.IV)(t.getWidth())):""});n.appendChild(l)}})),e.appendChild(n)},t.prototype.getRows=function(){var e=this,t=[];return this.parent.swimlaneSettings.keyField?(this.parent.kanbanData.map((function(n){if(e.parent.swimlaneSettings.showEmptyRow||!((0,a.hX)(n[e.parent.keyField])||""===n[e.parent.keyField]||n[e.parent.keyField]&&-1===e.columnKeys.indexOf(n[e.parent.keyField].toString()))){var i=n[e.parent.swimlaneSettings.textField]||n[e.parent.swimlaneSettings.keyField],r=n[e.parent.swimlaneSettings.keyField];if(!n[e.parent.swimlaneSettings.keyField]){if(!e.parent.swimlaneSettings.showUnassignedRow)return;i=e.parent.localeObj.getConstant("unassigned"),r=""}t.push({keyField:r,textField:i})}})),t=t.filter((function(e,t,n){return t===n.map((function(e){return e.keyField})).indexOf(e.keyField)})),(t=this.swimlaneSorting(t)).forEach((function(t){t.count=e.parent.kanbanData.filter((function(n){return e.columnKeys.indexOf(n[e.parent.keyField])>-1&&n[e.parent.swimlaneSettings.keyField]===t.keyField})).length})),0===t.length&&t.push({keyField:"",textField:""})):t.push({keyField:"",textField:""}),t},t.prototype.swimlaneSorting=function(e){return this.parent.swimlaneSettings.sortComparer?e=this.parent.swimlaneSettings.sortComparer.call(this.parent,e):(e.sort((function(e,t){return e.textField.localeCompare(t.textField,void 0,{numeric:!0})})),"Descending"===this.parent.swimlaneSettings.sortDirection&&e.reverse()),e},t.prototype.createStackedRow=function(e){var t=(0,a.n)("tr",{className:Z+" e-stacked-header-row"}),n=[];this.parent.columns.forEach((function(t){for(var i="",a=0,r=e;a<r.length;a++){var o=r[a];-1!==o.keyFields.indexOf(t.keyField.toString())&&(i=o.text)}n.push(i)}));for(var i=0;i<n.length;i++){for(var r=1,o=i+1;o<n.length&&(""!==n[i]&&""!==n[o]&&n[i]===n[o]);o++)r++;var l=(0,a.n)("div",{className:X,innerHTML:n[i]}),s=(0,a.n)("th",{className:K+" "+W,attrs:{colspan:r.toString()}});t.appendChild(s).appendChild(l),i+=r-1}return t},t.prototype.scrollUiUpdate=function(){var e=this,t=this.parent.element.querySelector("."+z),n=this.parent.element.querySelector("."+Y),i=this.parent.element.offsetHeight-t.offsetHeight;if(this.parent.isAdaptive){i=window.innerHeight-(t.offsetHeight+25);var r=this.parent.element.querySelector("."+Te);r&&(i-=r.offsetHeight),[].slice.call(this.parent.element.querySelectorAll("."+U)).forEach((function(t){var n=t.querySelector("."+re);n.classList.contains(Ee)||(n.style.height=(0,a.IV)(i),a.Jm.add(t,"touchmove",e.onAdaptiveScroll,e))}))}"auto"!==this.parent.height&&"100%"!==this.parent.height&&(n.style.height=(0,a.IV)(i)),[].slice.call(t.children).forEach((function(t){var i=0;n.offsetWidth-n.clientWidth>0&&(i=17,n.offsetHeight-n.clientHeight>0&&(t.style.width=(0,a.IV)(n.clientWidth))),e.parent.enableRtl?t.style.paddingLeft=(0,a.IV)(i):t.style.paddingRight=(0,a.IV)(i)})),this.updateScrollPosition()},t.prototype.onContentScroll=function(e){var t=e.target,n=this.parent.element.querySelector("."+z);[].slice.call(n.children).forEach((function(e){e.scrollLeft=t.scrollLeft})),this.parent.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop},!(0,a.hX)(this.parent.swimlaneSettings.keyField)&&this.parent.swimlaneSettings.enableFrozenRows&&this.frozenRows(e)},t.prototype.addFrozenSwimlaneDataKey=function(e){var t=e.getAttribute("data-key");(0,a.hX)(t)||this.frozenSwimlaneRow.setAttribute("data-key",t)},t.prototype.frozenRows=function(e){var t=this.parent.element.querySelector("."+te),n=this.parent.element.querySelector("."+z),i=this.parent.element.querySelector("."+Y);if((0,a.hX)(this.frozenSwimlaneRow)){this.frozenSwimlaneRow=(0,a.n)("div",{className:Ke});var r=(0,a.n)("div",{className:Qe});this.frozenSwimlaneRow.appendChild(r),this.parent.element.insertBefore(this.frozenSwimlaneRow,this.parent.element.firstElementChild),r.appendChild(t.querySelector("."+Te).cloneNode(!0)),this.addFrozenSwimlaneDataKey(t),(0,a.sN)(this.frozenSwimlaneRow,{height:(0,a.IV)(t.getBoundingClientRect().height),width:(0,a.IV)(i.querySelector(".e-swimlane").getBoundingClientRect().width),top:(0,a.IV)(n.getBoundingClientRect().height.toString())}),(0,a.sN)(n,{position:"relative",top:(0,a.IV)(-this.frozenSwimlaneRow.getBoundingClientRect().height)}),(0,a.sN)(i,{position:"relative",top:(0,a.IV)(-this.frozenSwimlaneRow.getBoundingClientRect().height)})}else{var o=[].slice.call(this.parent.element.querySelectorAll("."+te)),l=o[this.frozenOrder],s=o[this.frozenOrder-1],d=o[this.frozenOrder+1],c=void 0,p=void 0,h=void 0;l&&(c=l.getBoundingClientRect().top+l.getBoundingClientRect().height),s&&(p=s.getBoundingClientRect().top+s.getBoundingClientRect().height),d&&(h=d.getBoundingClientRect().top+d.getBoundingClientRect().height);var u=i.getBoundingClientRect().top+this.frozenSwimlaneRow.getBoundingClientRect().height,g=this.frozenSwimlaneRow.querySelector("."+Qe);h&&u>=h&&this.frozenOrder<o.length-1?(g&&((0,a.TF)(g.querySelector("."+Te)),g.appendChild(d.querySelector("."+Te).cloneNode(!0)),this.addFrozenSwimlaneDataKey(d)),++this.frozenOrder):p&&u<c&&u>p&&this.frozenOrder>0&&(g&&((0,a.TF)(g.querySelector("."+Te)),g.appendChild(s.querySelector("."+Te).cloneNode(!0)),this.addFrozenSwimlaneDataKey(s)),--this.frozenOrder)}e&&0==e.target.scrollTop&&this.removeFrozenRows()},t.prototype.removeFrozenRows=function(){(0,a.TF)(this.frozenSwimlaneRow),this.frozenSwimlaneRow=null;var e=this.parent.element.querySelector("."+z),t=this.parent.element.querySelector("."+Y);(0,a.sN)(e,{position:"",top:""}),(0,a.sN)(t,{position:"",top:""}),this.parent.scrollPosition.content={left:this.parent.scrollPosition.content.left,top:0},t.scrollTop=0,this.frozenOrder=0},t.prototype.onColumnScroll=function(e){var t=e.target;if(t.offsetParent){var n=t.offsetParent.getAttribute("data-key");this.parent.scrollPosition.column[n]={left:t.scrollLeft,top:t.scrollTop}}},t.prototype.onAdaptiveScroll=function(e){this.parent.touchModule.tabHold&&!this.parent.touchModule.mobilePopup&&e.preventDefault()},t.prototype.isColumnVisible=function(e){var t=this,n=!1;return"number"===typeof e.keyField?n=-1===this.parent.actionModule.hideColumnKeys.indexOf(e.keyField.toString()):e.keyField.split(",").forEach((function(e){n=-1===t.parent.actionModule.hideColumnKeys.indexOf(e)})),n},t.prototype.renderLimits=function(e,t){var n=(0,a.n)("div",{className:Ie});e.minCount&&n.appendChild((0,a.n)("div",{className:"e-min-count",innerHTML:this.parent.localeObj.getConstant("min")+": "+e.minCount.toString()})),e.maxCount&&n.appendChild((0,a.n)("div",{className:"e-max-count",innerHTML:this.parent.localeObj.getConstant("max")+": "+e.maxCount.toString()})),n.childElementCount>0&&(t.querySelector("."+re)?t.insertBefore(n,t.firstElementChild):t.appendChild(n))},t.prototype.renderValidation=function(){var e=this;this.parent.columns.forEach((function(t){if(t.minCount||t.maxCount){var n=e.columnData[t.keyField],i='[data-key="'+t.keyField+'"]',r=e.parent.element.querySelector("."+(K+i)),o=[].slice.call(e.parent.element.querySelectorAll("."+(U+i)));if("Swimlane"===e.parent.constraintType&&e.parent.swimlaneSettings.keyField)e.swimlaneRow.forEach((function(i,r){e.renderLimits(t,o[r]);var l=n.filter((function(t){return t[e.parent.swimlaneSettings.keyField]===i.keyField})),s=e.getValidationClass(t,l.length);s&&(0,a.iQ)([o[r]],s)}));else{e.renderLimits(t,r);var l=e.getValidationClass(t,n.length);l&&(0,a.iQ)(o.concat(r),l)}}}))},t.prototype.getValidationClass=function(e,t){var n;return e.maxCount&&t>e.maxCount?n=Ne:e.minCount&&t<e.minCount&&(n=He),n},t.prototype.refreshValidation=function(){[].slice.call(this.parent.element.querySelectorAll("."+Ie)).forEach((function(e){(0,a.TF)(e)}));var e=[].slice.call(this.parent.element.querySelectorAll("."+He));(0,a.vy)(e,He);var t=[].slice.call(this.parent.element.querySelectorAll("."+Ne));(0,a.vy)(t,Ne),this.renderValidation()},t.prototype.getColumnData=function(e,t){var n=this;void 0===t&&(t=this.parent.kanbanData);var i=[];if("number"===typeof e){var a=t.filter((function(t){return t[n.parent.keyField]===e}));i=i.concat(a)}else for(var r=function(e){var a=t.filter((function(t){return t[n.parent.keyField]===e.trim()}));i=i.concat(a)},o=0,l=e.split(",");o<l.length;o++){r(l[o])}return this.sortCategory(i),i},t.prototype.sortCategory=function(e){var t=this.parent.cardSettings.headerField,n=this.parent.sortSettings.direction;switch(this.parent.sortSettings.sortBy){case"DataSourceOrder":this.sortOrder(t,n,e);break;case"Custom":case"Index":this.parent.sortSettings.field&&(t=this.parent.sortSettings.field),this.sortOrder(t,n,e)}return e},t.prototype.sortOrder=function(e,t,n){var i,a,r=!0;return this.parent.kanbanData.length>0&&(r="number"===typeof this.parent.kanbanData[0][e]),r||"Index"!==this.parent.sortSettings.sortBy?(n=n.sort((function(t,n){return r?(i=t[e],a=n[e]):(i=t[e].toLowerCase(),a=n[e].toLowerCase()),i>a?1:a>i?-1:0})),"Descending"===t&&n.reverse(),n):n},t.prototype.documentClick=function(e){if(e.target.classList.contains(qe)&&this.parent.element.querySelector("."+Pe).classList.contains("e-popup-open")&&(this.treePopup.hide(),(0,a.vy)([this.popupOverlay],"e-enable")),!(0,a.kp)(e.target,"."+P)){var t=[].slice.call(this.parent.element.querySelectorAll("."+oe+"."+xe));(0,a.vy)(t,xe),this.disableAttributeSelection(t)}},t.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach((function(e){e.setAttribute("aria-selected","false")}))},t.prototype.getColumnCards=function(e){var t=this,n={};return this.columnKeys=[],this.parent.columns.forEach((function(i){var a="number"===typeof i.keyField;t.columnKeys=a?t.columnKeys.concat(i.keyField.toString()):t.columnKeys.concat(i.keyField.split(",").map((function(e){return e.trim()})));var r=t.getColumnData(i.keyField,e);n[i.keyField]=r})),n},t.prototype.getSwimlaneCards=function(){var e=this,t={};return this.parent.swimlaneSettings.keyField&&this.kanbanRows.forEach((function(n){return t[n.keyField]=e.parent.kanbanData.filter((function(t){return!(0,a.hX)(t[e.parent.keyField])&&e.columnKeys.indexOf(t[e.parent.keyField].toString())>-1&&(!t[e.parent.swimlaneSettings.keyField]&&e.parent.swimlaneSettings.showUnassignedRow?"":t[e.parent.swimlaneSettings.keyField])===n.keyField}))})),t},t.prototype.refreshHeaders=function(){var e=this.parent.element.querySelector("."+z);[].slice.call(e.children).forEach((function(e){return(0,a.TF)(e)})),this.renderHeader(e)},t.prototype.refreshCards=function(){this.parent.resetTemplates(["cardTemplate"]),[].slice.call(this.parent.element.querySelectorAll("."+re)).forEach((function(e){return(0,a.TF)(e)})),this.renderCards(),this.wireDragEvent(),this.parent.renderTemplates()},t.prototype.refresh=function(){var e=this,t=!1;(this.parent.columns.forEach((function(n){if(n.showItemCount){n&&n.template&&!t&&(e.refreshHeaders(),t=!0);var i="."+K+'[data-key="'+n.keyField+'"] .'+ae,a=e.parent.element.querySelector(i);if(a){var r=0;if("number"===typeof n.keyField)r=[].slice.call(e.parent.element.querySelectorAll("."+oe+'[data-key="'+n.keyField+'"]')).length;else for(var o=0,l=n.keyField.split(",");o<l.length;o++){var s=l[o];r=[].slice.call(e.parent.element.querySelectorAll("."+oe+'[data-key="'+s.trim()+'"]')).length+r}a.innerHTML="-\xa0"+r+"\xa0"+e.parent.localeObj.getConstant("items")}}})),this.parent.swimlaneSettings.keyField)&&[].slice.call(this.parent.element.querySelectorAll("."+te)).forEach((function(t){var n=t.getAttribute("data-key"),i=t.querySelector("."+ae);if(i&&n){var a=[].slice.call(t.nextElementSibling.querySelectorAll("."+oe));i.innerHTML="-\xa0"+a.length+"\xa0"+e.parent.localeObj.getConstant("items")}}));this.refreshValidation()},t.prototype.updateScrollPosition=function(){var e=this,t=this.parent.element.querySelector("."+Y);t&&t.scrollTo(this.parent.scrollPosition.content.left,this.parent.scrollPosition.content.top),[].slice.call(this.parent.element.querySelectorAll("."+re)).forEach((function(t){if(t.offsetParent){var n=e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")];n&&t.scrollTo(n.left,n.top)}}))},t.prototype.renderCardBasedOnIndex=function(e,t){var n=this,i=e[this.parent.keyField],r=this.parent.element.querySelector(".e-content-row:not(.e-swimlane-row)");if(this.parent.swimlaneSettings.keyField&&!this.parent.isAdaptive){var o='.e-content-row.e-swimlane-row[data-key="'+e[this.parent.swimlaneSettings.keyField]+'"]';if(this.parent.element.querySelector(o))r=this.parent.element.querySelector(o).nextElementSibling;else{if(-1!==this.columnKeys.indexOf(i)&&-1===this.parent.actionModule.hideColumnKeys.indexOf(i)){var l=this.kanbanRows.findIndex((function(t){return t.keyField===e[n.parent.swimlaneSettings.keyField]})),s=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row")),d=this.parent.element.querySelector("."+$+" tbody");s[l]&&(d=s[l]),this.renderSwimlaneRow(d,this.kanbanRows[l],!1),this.renderSingleContent(d,this.kanbanRows[l],!1)}r=this.parent.element.querySelector(o).nextElementSibling,[].slice.call(r.children).forEach((function(e){var t=(0,a.n)("div",{className:re});e.appendChild(t),t.appendChild(n.renderEmptyCard())}))}}if("Index"!==this.parent.sortSettings.sortBy){var c=this.parent.cardSettings.headerField;if("Custom"===this.parent.sortSettings.sortBy&&(c=this.parent.sortSettings.field),(0,a.hX)(this.parent.swimlaneSettings.keyField))t=this.getColumnData(i,this.parent.kanbanData).findIndex((function(t){return t[c]===e[c]}));else{var h=this.parent.getSwimlaneData(e[this.parent.swimlaneSettings.keyField]);t=this.getColumnData(i,h).findIndex((function(t){return t[c]===e[c]}))}}else"Index"===this.parent.sortSettings.sortBy&&this.parent.sortSettings.field&&"Ascending"===this.parent.sortSettings.direction&&(t=e[this.parent.sortSettings.field]-1);if(r){var u=[].slice.call(r.children).filter((function(e){return-1!==e.getAttribute("data-key").replace(/\s/g,"").split(",").indexOf(i.toString().replace(/\s/g,""))}))[0],g=u.querySelector("."+re),m=g.querySelector("."+pe);m&&(0,a.TF)(m);var f=this.renderCard(e);this.parent.allowDragAndDrop&&u.classList.contains(se)&&(this.parent.dragAndDropModule.wireDragEvents(f),(0,a.iQ)([f],le));var y={data:e,element:f,cancel:!1};this.parent.trigger(p,y,(function(e){e.cancel||((0,a.hX)(t)||0===g.children.length?g.appendChild(f):g.insertBefore(f,g.childNodes[t]))}))}},t.prototype.removeCard=function(e){var t=e[this.parent.cardSettings.headerField],n=this.parent.element.querySelector("."+oe+'[data-id="'+t+'"]');this.isSelectedCard=!!n.classList.contains(xe);var i=n.parentElement;n&&(0,a.TF)(n),0===i.querySelectorAll("."+oe+":not(."+Ce+")").length&&i.appendChild(this.renderEmptyCard())},t.prototype.wireEvents=function(){var e=this;a.Jm.add(this.parent.element,"click",this.parent.actionModule.clickHandler,this.parent.actionModule),a.Jm.add(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler,this.parent.actionModule),a.Jm.add(document,a.Pw.touchStartEvent,this.documentClick,this);var t=this.parent.element.querySelector("."+Y);a.Jm.add(t,"scroll",this.onContentScroll,this),[].slice.call(this.parent.element.querySelectorAll("."+re)).forEach((function(t){e.parent.isInitialRender&&t.offsetParent&&(e.parent.scrollPosition.column[t.offsetParent.getAttribute("data-key")]={left:0,top:0}),a.Jm.add(t,"scroll",e.onColumnScroll,e)})),this.parent.isAdaptive&&(this.parent.touchModule.wireTouchEvents(),t.scrollLeft=this.scrollLeft),this.wireDragEvent()},t.prototype.unWireEvents=function(){var e=this;a.Jm.remove(this.parent.element,"click",this.parent.actionModule.clickHandler),a.Jm.remove(this.parent.element,"dblclick",this.parent.actionModule.doubleClickHandler),a.Jm.remove(document,a.Pw.touchStartEvent,this.documentClick);var t=this.parent.element.querySelector("."+Y);t&&(a.Jm.remove(t,"scroll",this.onContentScroll),this.parent.allowDragAndDrop&&this.unWireDragEvent()),[].slice.call(this.parent.element.querySelectorAll("."+re)).forEach((function(t){a.Jm.remove(t,"scroll",e.onColumnScroll)})),this.parent.isAdaptive&&this.parent.touchModule.unWireTouchEvents()},t.prototype.wireDragEvent=function(){var e=this;if(this.parent.allowDragAndDrop){var t=[].slice.call(this.parent.element.querySelectorAll("."+U+"."+se+" ."+oe));(0,a.iQ)(t,le),t.forEach((function(t){return e.parent.dragAndDropModule.wireDragEvents(t)}))}},t.prototype.unWireDragEvent=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll("."+U+"."+se+" ."+oe));(0,a.vy)(t,le),t.forEach((function(t){return e.parent.dragAndDropModule.unWireDragEvents(t)}))},t.prototype.destroy=function(){this.parent.resetTemplates(),this.parent.off(m,this.initRender),this.parent.off(g,this.scrollUiUpdate),this.unWireEvents();var e=this.parent.element.querySelector("."+z);e&&(0,a.TF)(e);var t=this.parent.element.querySelector("."+Y);t&&(0,a.TF)(t),this.treeViewObj&&(this.treeViewObj.destroy(),this.treeViewObj=null),this.treePopup&&(this.treePopup.destroy(),this.treePopup=null);var n=this.parent.element.querySelector("."+Te);n&&(0,a.TF)(n);var i=this.parent.element.querySelector("."+Le);i&&(0,a.TF)(i)},t}(st),pt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ht=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},ut=function(e){function t(t,n){return e.call(this,t,n)||this}return pt(t,e),t.prototype.preRender=function(){this.isAdaptive=a.Pw.isDevice,this.kanbanData=[],this.enablePersistence&&this.swimlaneToggleArray||(this.swimlaneToggleArray=[]),this.activeCardData={data:null,element:null};this.localeObj=new a.Wo(this.getModuleName(),{items:"items",min:"Min",max:"Max",cardsSelected:"Cards Selected",addTitle:"Add New Card",editTitle:"Edit Card Details",deleteTitle:"Delete Card",deleteContent:"Are you sure you want to delete this card?",save:"Save",delete:"Delete",cancel:"Cancel",yes:"Yes",no:"No",close:"Close",noCard:"No cards to display",unassigned:"Unassigned"},this.locale),this.scrollPosition={content:{left:0,top:0},column:{}},this.isInitialRender=!0},t.prototype.requiredModules=function(){return[]},t.prototype.getPersistData=function(){return this.dataSource.length>0?this.addOnPersist(["columns","dataSource","swimlaneToggleArray"]):this.addOnPersist(["columns","kanbanData","swimlaneToggleArray"])},t.prototype.getModuleName=function(){return"kanban"},t.prototype.render=function(){var e=[P],t=[];this.enableRtl?e.push(I):t.push(I),this.isAdaptive?e.push(N):t.push(N),this.cssClass&&e.push(this.cssClass),this.element.setAttribute("role","main"),(0,a.pP)(this.element,e,t),this.element.style.width=(0,a.IV)(this.width),this.element.style.height=(0,a.IV)(this.height),(0,r.GF)({target:this.element}),this.showSpinner(),this.initializeModules()},t.prototype.onPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){switch(i[n]){case"cssClass":t.cssClass&&(0,a.vy)([this.element],t.cssClass),e.cssClass&&(0,a.iQ)([this.element],e.cssClass);break;case"enableRtl":case"locale":this.refresh();break;case"width":this.element.style.width=(0,a.IV)(e.width),this.element.querySelector("."+z).firstElementChild.style.width="auto",this.notify(g,{});break;case"height":this.element.style.height=(0,a.IV)(e.height),this.element.querySelector("."+Y).style.height="auto",this.notify(g,{});break;case"dataSource":case"query":this.dataModule&&this.dataModule.setState({isDataChanged:!1}),this.dataModule=new y(this);break;case"columns":case"constraintType":case"sortSettings":this.notify(m,{processedData:this.kanbanData});break;case"swimlaneSettings":this.onSwimlaneSettingsPropertyChanged(e.swimlaneSettings,t.swimlaneSettings);break;case"cardSettings":this.onCardSettingsPropertyChanged(e.cardSettings,t.cardSettings);break;case"allowDragAndDrop":e.allowDragAndDrop?this.layoutModule.wireDragEvent():this.layoutModule.unWireDragEvent();break;case"enableTooltip":this.tooltipModule&&(this.tooltipModule.destroy(),this.tooltipModule=null),e.enableTooltip&&(this.tooltipModule=new it(this),this.layoutModule.refreshCards());break;case"dialogSettings":e.dialogSettings&&(this.dialogModule=new et(this));break;case"allowKeyboard":this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),e.allowKeyboard&&(this.keyboardModule=new tt(this));break;case"stackedHeaders":this.layoutModule.refreshHeaders()}}},t.prototype.onSwimlaneSettingsPropertyChanged=function(e,t){for(var n=0,i=Object.keys(e);n<i.length;n++){switch(i[n]){case"keyField":case"textField":case"showEmptyRow":case"showItemCount":case"template":case"sortDirection":this.notify(m,{processedData:this.kanbanData});break;case"enableFrozenRows":this.layoutModule.frozenSwimlaneRow&&!this.swimlaneSettings.enableFrozenRows&&this.layoutModule.removeFrozenRows()}}},t.prototype.onCardSettingsPropertyChanged=function(e,t){for(var n=[],i=0,r=Object.keys(e);i<r.length;i++){switch(r[i]){case"showHeader":case"headerField":case"contentField":case"template":case"tagsField":case"grabberField":case"footerCssField":this.layoutModule.refreshCards();break;case"selectionType":(n=this.getSelectedCards()).length>0&&((0,a.vy)(n,xe),this.layoutModule.disableAttributeSelection(n))}}},t.prototype.initializeModules=function(){this.dataModule=new y(this),this.layoutModule=new ct(this),this.allowKeyboard&&(this.keyboardModule=new tt(this)),this.actionModule=new Xe(this),this.crudModule=new Je(this),this.dragAndDropModule=new We(this),this.dialogModule=new et(this),this.enableTooltip&&(this.tooltipModule=new it(this)),(a.Pw.isDevice||a.Pw.isTouch)&&(this.touchModule=new ot(this))},t.prototype.renderTemplates=function(){this.isReact&&this.renderReactTemplates()},t.prototype.resetTemplates=function(e){this.isReact&&this.clearTemplate(e)},t.prototype.destroyModules=function(){this.layoutModule&&(this.layoutModule.destroy(),this.layoutModule=null),this.keyboardModule&&(this.keyboardModule.destroy(),this.keyboardModule=null),this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.dialogModule=null,this.actionModule=null,this.crudModule=null,this.dataModule=null,this.dragAndDropModule=null},t.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return(0,a.wE)(document.querySelector(e).innerHTML.trim())}catch(t){return(0,a.wE)(e)}},t.prototype.getCardDetails=function(e){var t=this,n="number"===typeof this.kanbanData[0][this.cardSettings.headerField]?parseInt(e.getAttribute("data-id"),10):e.getAttribute("data-id");return this.kanbanData.filter((function(e){return e[t.cardSettings.headerField]===n}))[0]},t.prototype.getColumnData=function(e,t){return this.layoutModule.getColumnCards(t)[e]||[]},t.prototype.getSwimlaneData=function(e){return this.layoutModule.getSwimlaneCards()[e]||[]},t.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll("."+oe+"."+xe))},t.prototype.showSpinner=function(){(0,r.xc)(this.element)},t.prototype.hideSpinner=function(){(0,r.W$)(this.element)},t.prototype.openDialog=function(e,t){this.dialogModule.openDialog(e,t)},t.prototype.closeDialog=function(){this.dialogModule.closeDialog()},t.prototype.addCard=function(e,t){this.crudModule.addCard(e,t)},t.prototype.updateCard=function(e,t){this.crudModule.updateCard(e,t)},t.prototype.deleteCard=function(e){this.crudModule.deleteCard(e)},t.prototype.addColumn=function(e,t){this.actionModule.addColumn(e,t)},t.prototype.deleteColumn=function(e){this.actionModule.deleteColumn(e)},t.prototype.showColumn=function(e){this.actionModule.showColumn(e)},t.prototype.hideColumn=function(e){this.actionModule.hideColumn(e)},t.prototype.refreshUI=function(e,t){t=t||0,this.dataModule.refreshUI(e,t)},t.prototype.refreshHeader=function(){this.resetTemplates(["columnTemplate"]),this.layoutModule&&this.layoutModule.refreshHeaders(),this.renderTemplates()},t.prototype.destroy=function(){this.destroyModules(),[].slice.call(this.element.childNodes).forEach((function(e){(0,a.Yo)(e)}));var t=[P];this.cssClass&&(t=t.concat(this.cssClass.split(" "))),(0,a.vy)([this.element],t),e.prototype.destroy.call(this)},ht([(0,a.mA)()],t.prototype,"cssClass",void 0),ht([(0,a.mA)("auto")],t.prototype,"width",void 0),ht([(0,a.mA)("auto")],t.prototype,"height",void 0),ht([(0,a.mA)([])],t.prototype,"dataSource",void 0),ht([(0,a.mA)()],t.prototype,"query",void 0),ht([(0,a.mA)()],t.prototype,"keyField",void 0),ht([(0,a.mA)("Column")],t.prototype,"constraintType",void 0),ht([(0,a.mA)([])],t.prototype,"externalDropId",void 0),ht([(0,a.pM)([],x)],t.prototype,"columns",void 0),ht([(0,a.mA)(!0)],t.prototype,"allowKeyboard",void 0),ht([(0,a.pM)([],M)],t.prototype,"stackedHeaders",void 0),ht([(0,a.pr)({},S)],t.prototype,"swimlaneSettings",void 0),ht([(0,a.pr)({},k)],t.prototype,"cardSettings",void 0),ht([(0,a.pr)({},L)],t.prototype,"sortSettings",void 0),ht([(0,a.pr)({},E)],t.prototype,"dialogSettings",void 0),ht([(0,a.mA)(!0)],t.prototype,"allowDragAndDrop",void 0),ht([(0,a.mA)(!1)],t.prototype,"enableTooltip",void 0),ht([(0,a.mA)(!1)],t.prototype,"showEmptyColumn",void 0),ht([(0,a.mA)(!1)],t.prototype,"enablePersistence",void 0),ht([(0,a.mA)()],t.prototype,"tooltipTemplate",void 0),ht([(0,a.Jh)()],t.prototype,"actionBegin",void 0),ht([(0,a.Jh)()],t.prototype,"actionComplete",void 0),ht([(0,a.Jh)()],t.prototype,"actionFailure",void 0),ht([(0,a.Jh)()],t.prototype,"created",void 0),ht([(0,a.Jh)()],t.prototype,"dataBinding",void 0),ht([(0,a.Jh)()],t.prototype,"dataBound",void 0),ht([(0,a.Jh)()],t.prototype,"cardClick",void 0),ht([(0,a.Jh)()],t.prototype,"cardDoubleClick",void 0),ht([(0,a.Jh)()],t.prototype,"queryCellInfo",void 0),ht([(0,a.Jh)()],t.prototype,"cardRendered",void 0),ht([(0,a.Jh)()],t.prototype,"dragStart",void 0),ht([(0,a.Jh)()],t.prototype,"drag",void 0),ht([(0,a.Jh)()],t.prototype,"dragStop",void 0),ht([(0,a.Jh)()],t.prototype,"dialogOpen",void 0),ht([(0,a.Jh)()],t.prototype,"dialogClose",void 0),ht([(0,a.Jh)()],t.prototype,"dataStateChange",void 0),ht([(0,a.Jh)()],t.prototype,"dataSourceChanged",void 0),t=ht([a.kc],t)}(a.uA),gt=n(3527),mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ft=function(e){function t(t){var n=e.call(this,t)||this;return n.initRenderCalled=!1,n.checkInjectedModules=!0,n.directivekeys={columns:"column",stackedHeaders:"stackedHeader"},n.immediateRender=!1,n.portals=[],n}return mt(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return i.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(ut);(0,gt.XJ)(ft,[gt.xu,i.Component])}}]);
//# sourceMappingURL=92.3dacc755.chunk.js.map